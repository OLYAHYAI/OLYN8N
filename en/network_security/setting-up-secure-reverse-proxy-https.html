<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Deploy a secure reverse proxy (Nginx Proxy Manager) in your homelab. Centralize HTTPS management using Docker and Let's Encrypt for services like Proxmox and...">
    <meta name="keywords" content="reverse proxy, homelab, nginx, docker, ssl, network security, lets encrypt">
    <meta name="author" content="OLYAHYAI">

    <title>Setting Up Secure Reverse Proxy Https | Omar LYAHYAI Technical Blog</title>

    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/responsive.css">
    <link rel="stylesheet" href="/css/animations.css">
    <link rel="stylesheet" href="/css/blog.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body class="dark-theme">
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header class="header" role="banner">
        <nav class="navbar" role="navigation" aria-label="Main navigation">
            <div class="container">
                <div class="nav-brand">
                    <a href="/index.html" class="logo">
                        <i class="fas fa-terminal"></i>
                        <span>OLYAHYAI</span>
                    </a>
                </div>

                <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
                    <span class="hamburger"></span>
                </button>

                <ul class="nav-menu">
                    <li><a href="/index.html#home" class="nav-link">Home</a></li>
                    <li><a href="/index.html#about" class="nav-link">About</a></li>
                    <li><a href="/index.html#projects" class="nav-link">Projects</a></li>
                    <li><a href="/index.html#skills" class="nav-link">Skills</a></li>
                    <li><a href="/blog/index.html" class="nav-link active">Blog</a></li>
                    <li><a href="/index.html#contact" class="nav-link">Contact</a></li>
                </ul>

                <div class="nav-actions">
                    <a href="/fr/network_security/setting-up-secure-reverse-proxy-https.html" class="lang-toggle" aria-label="Change language">
                        <span class="lang-current">FR</span>
                        <i class="fas fa-globe"></i>
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <main id="main-content">
        <section class="article-header" role="region" aria-label="Article header">
            <div class="container">
                <div class="article-breadcrumb">
                    <nav class="breadcrumb" aria-label="Breadcrumb">
                        <a href="/index.html">Home</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <a href="/blog/index.html">Blog</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <a href="/blog/network_security.html">Network Security</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <span>Setting Up Secure Reverse Proxy Https</span>
                    </nav>
                </div>

                <h1 class="article-title">Setting Up Secure Reverse Proxy Https</h1>

                <div class="article-meta">
                    <div class="article-meta-item">
                        <i class="far fa-calendar"></i>
                        <span>2025-11-19</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="far fa-clock"></i>
                        <span>5 min min read</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="fas fa-folder"></i>
                        <span>Network Security</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="fas fa-tags"></i>
                        <span>reverse proxy, homelab, nginx, docker, ssl, network security, lets encrypt</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="article-content" role="region" aria-label="Article content">
            <div class="container">
                <div class="article-body">
                    <!-- 
TEMPLATE - Press Alt+E to apply

UPDATE THESE FIELDS:
- title: "Your Title" (KEEP QUOTES)
- date: "YYYY-MM-DD" (KEEP QUOTES)
- category: infrastructure/network_security/automation_ai/reference
- language: auto (let workflow detect) | en (force English) | fr (force French)
- tags: single-keyword-only (NO COMMAS! Use one word or hyphenated)
- description: "Short summary" (KEEP QUOTES)

CRITICAL RULES:
✅ DO: Keep quotes around title, date, description
✅ DO: Use "auto" for language to let workflow detect from content
✅ DO: Use single word for tags (homelab, pfsense, proxmox)
❌ DON'T: Use commas in tags (breaks YAML!)
❌ DON'T: Remove quotes from title/date/description

The workflow will:
- Detect language automatically from your content
- Generate English + French versions
- Create full HTML with navigation
- Preserve images and links
-->
<h1
id="the-digital-guardian-of-my-homelab-setting-up-a-secure-reverse-proxy-with-https">The
Digital Guardian of My Homelab: Setting Up a Secure Reverse Proxy with
HTTPS</h1>
<h2 id="goals">Goals</h2>
<ul>
<li>Access all your internal web services (Proxmox, n8n, and databases)
securely over HTTPS domains using a reverse proxy.</li>
<li>Use Let’s Encrypt for free, automated SSL certificates.</li>
</ul>
<h2 id="why-use-a-reverse-proxy">Why Use a Reverse Proxy?</h2>
<p>A reverse proxy acts as a centralized gateway to your homelab
services, providing several critical benefits:</p>
<ul>
<li><strong>Unified SSL Management</strong>: Single point for
certificate management</li>
<li><strong>Security Layer</strong>: Protection against direct service
exposure</li>
<li><strong>Custom Domains</strong>: Clean URLs instead of IP:PORT
combinations</li>
<li><strong>Load Balancing</strong>: Distribute traffic across multiple
backend servers</li>
</ul>
<h2 id="architecture-overview">Architecture Overview</h2>
<pre><code>Internet/LAN
    ↓
pfSense Firewall
    ↓
Nginx Proxy Manager (Reverse Proxy)
    ↓
├── Proxmox (192.168.x.x:8006)
├── n8n (192.168.x.x:5678)
├── Databases (192.168.x.x:XXXX)
└── Other Services</code></pre>
<h2 id="step-1-deploy-reverse-proxy-vmcontainer">Step 1: Deploy Reverse
Proxy VM/Container</h2>
<h3 id="option-a-lightweight-vm">Option A: Lightweight VM</h3>
<ul>
<li>Create a new VM on Proxmox (Debian/Ubuntu recommended)</li>
<li>Allocate minimal resources: 1 CPU, 2GB RAM, 10GB storage</li>
<li>Install Docker and Docker Compose</li>
</ul>
<h3 id="option-b-lxc-container-recommended">Option B: LXC Container
(Recommended)</h3>
<ul>
<li>Use Proxmox helper scripts for faster deployment</li>
<li>More efficient resource usage</li>
<li>Easier management</li>
</ul>
<h3 id="install-docker-and-docker-compose">Install Docker and Docker
Compose</h3>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update system</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt upgrade <span class="at">-y</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Docker</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-fsSL</span> https://get.docker.com <span class="at">-o</span> get-docker.sh</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> sh get-docker.sh</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Docker Compose</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install docker-compose <span class="at">-y</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Add user to docker group</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> usermod <span class="at">-aG</span> docker <span class="va">$USER</span></span></code></pre></div>
<h2 id="step-2-install-nginx-proxy-manager">Step 2: Install Nginx Proxy
Manager</h2>
<h3 id="docker-compose-configuration">Docker Compose Configuration</h3>
<p>Create <code>docker-compose.yml</code>:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;jc21/nginx-proxy-manager:latest&#39;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">container_name</span><span class="kw">:</span><span class="at"> nginx-proxy-manager</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">restart</span><span class="kw">:</span><span class="at"> unless-stopped</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&#39;80:80&#39;</span><span class="co">      # HTTP</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&#39;81:81&#39;</span><span class="co">      # Admin UI</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&#39;443:443&#39;</span><span class="co">    # HTTPS</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_MYSQL_HOST</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;db&quot;</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_MYSQL_PORT</span><span class="kw">:</span><span class="at"> </span><span class="dv">3306</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_MYSQL_USER</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;npm&quot;</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_MYSQL_PASSWORD</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;npm&quot;</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_MYSQL_NAME</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;npm&quot;</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./data:/data</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./letsencrypt:/etc/letsencrypt</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db</span><span class="kw">:</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;jc21/mariadb-aria:latest&#39;</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">container_name</span><span class="kw">:</span><span class="at"> npm-database</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">restart</span><span class="kw">:</span><span class="at"> unless-stopped</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_ROOT_PASSWORD</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;npm&#39;</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_DATABASE</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;npm&#39;</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_USER</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;npm&#39;</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_PASSWORD</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;npm&#39;</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./data/mysql:/var/lib/mysql</span></span></code></pre></div>
<h3 id="launch-nginx-proxy-manager">Launch Nginx Proxy Manager</h3>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">-d</span></span></code></pre></div>
<h3 id="access-admin-ui">Access Admin UI</h3>
<ul>
<li>Navigate to: <code>http://&lt;proxy-vm-ip&gt;:81</code></li>
<li>Default credentials:
<ul>
<li>Email: <code>admin@example.com</code></li>
<li>Password: <code>changeme</code></li>
</ul></li>
<li><strong>Immediately change these credentials after first
login!</strong></li>
</ul>
<h2 id="step-3-configure-internal-dns">Step 3: Configure Internal
DNS</h2>
<h3 id="using-pfsense-dns-resolver">Using pfSense DNS Resolver</h3>
<ol type="1">
<li>Navigate to <strong>Services &gt; DNS Resolver</strong></li>
<li>Enable DNS Resolver if not already enabled</li>
<li>Under <strong>Host Overrides</strong>, add entries:
<ul>
<li><strong>Host</strong>: <code>proxmox</code>,
<strong>Domain</strong>: <code>lab</code>, <strong>IP</strong>:
<code>&lt;proxy-ip&gt;</code></li>
<li><strong>Host</strong>: <code>n8n</code>, <strong>Domain</strong>:
<code>lab</code>, <strong>IP</strong>:
<code>&lt;proxy-ip&gt;</code></li>
<li><strong>Host</strong>: <code>db</code>, <strong>Domain</strong>:
<code>lab</code>, <strong>IP</strong>:
<code>&lt;proxy-ip&gt;</code></li>
</ul></li>
</ol>
<h3 id="alternative-local-hosts-file">Alternative: Local Hosts File</h3>
<p>For testing purposes, edit your local <code>/etc/hosts</code>:</p>
<pre><code>&lt;proxy-ip&gt;  proxmox.lab
&lt;proxy-ip&gt;  n8n.lab
&lt;proxy-ip&gt;  db.lab</code></pre>
<h2 id="step-4-add-services-as-proxy-hosts">Step 4: Add Services as
Proxy Hosts</h2>
<h3 id="in-nginx-proxy-manager-ui">In Nginx Proxy Manager UI</h3>
<ol type="1">
<li>Click <strong>“Proxy Hosts”</strong> → <strong>“Add Proxy
Host”</strong></li>
<li><strong>Details Tab</strong>:
<ul>
<li><strong>Domain Names</strong>: <code>n8n.lab</code></li>
<li><strong>Scheme</strong>: <code>http</code></li>
<li><strong>Forward Hostname/IP</strong>:
<code>&lt;n8n-container-ip&gt;</code></li>
<li><strong>Forward Port</strong>: <code>5678</code></li>
<li><strong>Block Common Exploits</strong>: ✓</li>
<li><strong>Websockets Support</strong>: ✓ (important for n8n)</li>
</ul></li>
<li>Repeat for other services:
<ul>
<li>Proxmox: Port <code>8006</code>, Scheme <code>https</code></li>
<li>Databases: Port varies, Scheme <code>http</code></li>
</ul></li>
</ol>
<h2 id="step-5-request-ssl-certificates">Step 5: Request SSL
Certificates</h2>
<h3 id="enable-lets-encrypt">Enable Let’s Encrypt</h3>
<ol type="1">
<li>In Proxy Host entry, go to <strong>SSL Tab</strong></li>
<li>Select <strong>“Request a new SSL Certificate”</strong></li>
<li>Options:
<ul>
<li><strong>Force SSL</strong>: ✓</li>
<li><strong>HTTP/2 Support</strong>: ✓</li>
<li><strong>HSTS Enabled</strong>: ✓ (recommended)</li>
<li><strong>Email for Let’s Encrypt</strong>: Your email</li>
</ul></li>
<li>Click <strong>Save</strong></li>
</ol>
<p>Let’s Encrypt will automatically: - Generate SSL certificate -
Configure HTTPS - Set up auto-renewal (every 90 days)</p>
<h3 id="dns-challenge-for-wildcard-certificates">DNS Challenge (For
Wildcard Certificates)</h3>
<p>If you own a domain and want <code>*.yourdomain.com</code>:</p>
<ol type="1">
<li>Use DNS challenge method</li>
<li>Configure DNS provider credentials in NPM</li>
<li>Request wildcard certificate: <code>*.yourdomain.com</code></li>
</ol>
<h2 id="step-6-open-port-443-in-firewall">Step 6: Open Port 443 in
Firewall</h2>
<h3 id="pfsense-configuration">pfSense Configuration</h3>
<ol type="1">
<li>Navigate to <strong>Firewall &gt; NAT &gt; Port
Forward</strong></li>
<li>Create rule:
<ul>
<li><strong>Interface</strong>: WAN</li>
<li><strong>Protocol</strong>: TCP</li>
<li><strong>Destination Port Range</strong>: 443</li>
<li><strong>Redirect Target IP</strong>:
<code>&lt;proxy-vm-ip&gt;</code></li>
<li><strong>Redirect Target Port</strong>: 443</li>
<li><strong>Description</strong>: Reverse Proxy HTTPS</li>
</ul></li>
<li>Create corresponding firewall rule if needed</li>
</ol>
<h3 id="vmcontainer-firewall">VM/Container Firewall</h3>
<p>If using UFW:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ufw allow 80/tcp</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ufw allow 443/tcp</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ufw allow 81/tcp  <span class="co"># Admin UI (restrict to LAN only!)</span></span></code></pre></div>
<h2 id="step-7-test-access">Step 7: Test Access</h2>
<h3 id="internal-testing">Internal Testing</h3>
<p>From your LAN:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-k</span> https://n8n.lab</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-k</span> https://proxmox.lab:8006</span></code></pre></div>
<h3 id="browser-testing">Browser Testing</h3>
<ol type="1">
<li>Open browser</li>
<li>Navigate to <code>https://n8n.lab</code></li>
<li>Verify:
<ul>
<li>✅ Valid SSL certificate (green padlock)</li>
<li>✅ Service loads correctly</li>
<li>✅ No certificate warnings</li>
</ul></li>
</ol>
<h2 id="security-hardening">Security Hardening</h2>
<h3 id="restrict-admin-ui-access">Restrict Admin UI Access</h3>
<ol type="1">
<li><p>In Nginx Proxy Manager:</p>
<ul>
<li><strong>Access Lists</strong> → Create new</li>
<li><strong>Authorization</strong>: Require username/password</li>
<li>Apply to admin UI proxy host</li>
</ul></li>
<li><p>Firewall rules:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Allow admin UI only from LAN</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ufw deny 81/tcp</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ufw allow from 192.168.0.0/16 to any port 81</span></code></pre></div></li>
</ol>
<h3 id="enable-fail2ban">Enable Fail2Ban</h3>
<p>Protect against brute-force attacks:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install fail2ban <span class="at">-y</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create NPM filter</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nano /etc/fail2ban/filter.d/npm.conf</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[Definition]</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="dt">failregex </span><span class="ot">=</span><span class="st"> ^&lt;HOST&gt; .* &quot;(GET|POST|HEAD).*HTTP.*&quot; (4|5)\d\d</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="dt">ignoreregex </span><span class="ot">=</span></span></code></pre></div>
<h2 id="monitoring-and-maintenance">Monitoring and Maintenance</h2>
<h3 id="check-certificate-expiry">Check Certificate Expiry</h3>
<p>Nginx Proxy Manager automatically renews certificates 30 days before
expiry.</p>
<p>Verify in UI: - <strong>SSL Certificates</strong> → Check expiry
dates</p>
<h3 id="log-monitoring">Log Monitoring</h3>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View NPM logs</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> logs <span class="at">-f</span> nginx-proxy-manager</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Access logs location</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ./data/logs</span></code></pre></div>
<h3 id="performance-monitoring">Performance Monitoring</h3>
<p>Add monitoring with: - Prometheus + Grafana - Uptime Kuma for service
availability</p>
<h2 id="common-issues-and-solutions">Common Issues and Solutions</h2>
<h3 id="issue-1-certificate-request-fails">Issue 1: Certificate Request
Fails</h3>
<p><strong>Problem</strong>: Let’s Encrypt challenge fails</p>
<p><strong>Solution</strong>: - Verify port 80 is accessible from
internet - Check DNS resolution - Try HTTP challenge instead of DNS</p>
<h3 id="issue-2-websocket-connection-fails">Issue 2: WebSocket
Connection Fails</h3>
<p><strong>Problem</strong>: Real-time features don’t work (n8n, Proxmox
console)</p>
<p><strong>Solution</strong>: - Enable <strong>Websockets
Support</strong> in proxy host - Add custom Nginx configuration:
<code>nginx   proxy_set_header Upgrade $http_upgrade;   proxy_set_header Connection "upgrade";</code></p>
<h3 id="issue-3-proxmox-webui-access-denied">Issue 3: Proxmox WebUI
Access Denied</h3>
<p><strong>Problem</strong>: Cannot access Proxmox through proxy</p>
<p><strong>Solution</strong>: - Set <strong>Forward Scheme</strong> to
<code>https</code> - Add custom headers:
<code>nginx   proxy_set_header Host $host;   proxy_set_header X-Real-IP $remote_addr;</code></p>
<h2 id="conclusion">Conclusion</h2>
<p>Setting up a reverse proxy with Nginx Proxy Manager provides
centralized, secure access to all your homelab services. The combination
of automated SSL certificates, custom domains, and unified management
creates a professional infrastructure that’s both secure and easy to
maintain.</p>
<p>This setup serves as the digital guardian of your homelab, protecting
services while providing convenient access. With proper configuration
and security hardening, you can safely expose selected services to the
internet while maintaining robust protection against unauthorized
access.</p>
<p><em>Remember: Security is an ongoing process. Regularly update your
reverse proxy, monitor logs, and review access patterns.</em></p>
                </div>

                <div class="article-navigation">
                </div>
            </div>
        </section>
    </main>

    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>OLYAHYAI</h3>
                    <p>Pentester in Training | Cybersecurity Enthusiast</p>
                </div>

                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/index.html#home">Home</a></li>
                        <li><a href="/index.html#about">About</a></li>
                        <li><a href="/index.html#projects">Projects</a></li>
                        <li><a href="/blog/index.html">Blog</a></li>
                    </ul>
                </div>

                <div class="footer-social">
                    <h4>Connect</h4>
                    <div class="social-links">
                        <a href="https://github.com/OLYAHYAI" target="_blank" rel="noopener">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="https://ma.linkedin.com/in/lyahyai-omar" target="_blank" rel="noopener">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="mailto:contact@olyahyai.com">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 OLYAHYAI. All rights reserved.</p>
                <p>Built with <i class="fas fa-heart"></i> and <i class="fas fa-terminal"></i></p>
            </div>
        </div>
    </footer>

    <button class="back-to-top" aria-label="Back to top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <script src="../../js/main.js"></script>
    <script src="../../js/animations.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>