<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Gain full data sovereignty and cut costs by self-hosting Obsidian LiveSync. Detailed guide on deploying secure, custom synchronization using Docker and Couch...">
    <meta name="keywords" content="Obsidian, LiveSync, Docker, CouchDB, Self-hosting, Homelab, Data-sovereignty">
    <meta name="author" content="OLYAHYAI">

    <title>Quest Fluid Notes Obsidian Livesync Configuration | Omar LYAHYAI Technical Blog</title>

    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/responsive.css">
    <link rel="stylesheet" href="/css/animations.css">
    <link rel="stylesheet" href="/css/blog.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body class="dark-theme">
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header class="header" role="banner">
        <nav class="navbar" role="navigation" aria-label="Main navigation">
            <div class="container">
                <div class="nav-brand">
                    <a href="/index.html" class="logo">
                        <i class="fas fa-terminal"></i>
                        <span>OLYAHYAI</span>
                    </a>
                </div>

                <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
                    <span class="hamburger"></span>
                </button>

                <ul class="nav-menu">
                    <li><a href="/index.html#home" class="nav-link">Home</a></li>
                    <li><a href="/index.html#about" class="nav-link">About</a></li>
                    <li><a href="/index.html#projects" class="nav-link">Projects</a></li>
                    <li><a href="/index.html#skills" class="nav-link">Skills</a></li>
                    <li><a href="/blog/index.html" class="nav-link active">Blog</a></li>
                    <li><a href="/index.html#contact" class="nav-link">Contact</a></li>
                </ul>

                <div class="nav-actions">
                    <a href="/fr/automation_ai/quest-fluid-notes-obsidian-livesync-configuration.html" class="lang-toggle" aria-label="Change language">
                        <span class="lang-current">FR</span>
                        <i class="fas fa-globe"></i>
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <main id="main-content">
        <section class="article-header" role="region" aria-label="Article header">
            <div class="container">
                <div class="article-breadcrumb">
                    <nav class="breadcrumb" aria-label="Breadcrumb">
                        <a href="/index.html">Home</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <a href="/blog/index.html">Blog</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <a href="/blog/automation_ai.html">Automation & AI</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <span>Quest Fluid Notes Obsidian Livesync Configuration</span>
                    </nav>
                </div>

                <h1 class="article-title">Quest Fluid Notes Obsidian Livesync Configuration</h1>

                <div class="article-meta">
                    <div class="article-meta-item">
                        <i class="far fa-calendar"></i>
                        <span>2025-11-19</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="far fa-clock"></i>
                        <span>5 min min read</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="fas fa-folder"></i>
                        <span>Automation & AI</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="fas fa-tags"></i>
                        <span>Obsidian, LiveSync, Docker, CouchDB, Self-hosting, Homelab, Data-sovereignty</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="article-content" role="region" aria-label="Article content">
            <div class="container">
                <div class="article-body">
                    <!-- 
TEMPLATE - Press Alt+E to apply

UPDATE THESE FIELDS:
- title: "Your Title" (KEEP QUOTES)
- date: "YYYY-MM-DD" (KEEP QUOTES)
- category: infrastructure/network_security/automation_ai/reference
- language: auto (let workflow detect) | en (force English) | fr (force French)
- tags: single-keyword-only (NO COMMAS! Use one word or hyphenated)
- description: "Short summary" (KEEP QUOTES)

CRITICAL RULES:
✅ DO: Keep quotes around title, date, description
✅ DO: Use "auto" for language to let workflow detect from content
✅ DO: Use single word for tags (homelab, pfsense, proxmox)
❌ DON'T: Use commas in tags (breaks YAML!)
❌ DON'T: Remove quotes from title/date/description

The workflow will:
- Detect language automatically from your content
- Generate English + French versions
- Create full HTML with navigation
- Preserve images and links
-->
<h1
id="the-quest-for-fluid-notes-my-obsidian-livesync-configuration-and-triumphs">The
Quest for Fluid Notes: My Obsidian LiveSync Configuration and
Triumphs</h1>
<h2 id="overview">Overview</h2>
<p>This document summarizes the setup, issues encountered, and
resolutions implemented during the deployment of Obsidian Self-hosted
LiveSync using Docker and CouchDB. Building a self-hosted sync solution
provides complete data sovereignty while avoiding subscription
costs.</p>
<h2 id="why-self-host-obsidian-sync">Why Self-Host Obsidian Sync?</h2>
<h3 id="advantages-of-self-hosting">Advantages of Self-Hosting</h3>
<p><strong>Data Sovereignty:</strong> - Complete control over your notes
and attachments - No third-party access to sensitive information -
Compliance with personal/corporate data policies - Geographic control of
data storage</p>
<p><strong>Cost Savings:</strong> - Obsidian Sync: $8/month = $96/year -
Self-hosted: One-time setup, minimal hosting costs - ROI: Breaks even in
2-3 months</p>
<p><strong>Learning Opportunities:</strong> - Hands-on experience with
Docker - Database management skills - Network configuration practice -
Troubleshooting real-world systems</p>
<p><strong>Flexibility:</strong> - Custom backup strategies - Unlimited
storage (limited only by your server) - Integration with existing
homelab infrastructure - Advanced configuration options</p>
<h2 id="setup-goals">Setup Goals</h2>
<h3 id="primary-objectives">Primary Objectives</h3>
<ul>
<li>✅ Enable secure, efficient syncing of Obsidian vaults across
devices</li>
<li>✅ Use Dockerized CouchDB as the backend database</li>
<li>✅ Implement End-to-End Encryption (E2EE) version 2 for data
security</li>
<li>✅ Handle multi-OS file system case sensitivity gracefully</li>
</ul>
<h3 id="target-architecture">Target Architecture</h3>
<pre><code>Devices (Windows/Linux/Android/iOS)
    ↓
Obsidian App + LiveSync Plugin
    ↓
HTTPS/Internet
    ↓
CouchDB (Docker Container)
    ├── Database: obsidian
    ├── Port: 5984
    └── Storage: Persistent volume</code></pre>
<h2 id="initial-setup">Initial Setup</h2>
<h3 id="step-1-deploy-couchdb-with-docker">Step 1: Deploy CouchDB with
Docker</h3>
<div class="sourceCode" id="cb2"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># docker-compose.yml</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">couchdb</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> couchdb:latest</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">container_name</span><span class="kw">:</span><span class="at"> couchdb-for-obsidian</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">restart</span><span class="kw">:</span><span class="at"> unless-stopped</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> COUCHDB_USER=admin</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> COUCHDB_PASSWORD=your_secure_password_here</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./data:/opt/couchdb/data</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./config:/opt/couchdb/etc/local.d</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;5984:5984&quot;</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> obsidian-sync</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">obsidian-sync</span><span class="kw">:</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">driver</span><span class="kw">:</span><span class="at"> bridge</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy CouchDB</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">-d</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify it&#39;s running</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> ps <span class="kw">|</span> <span class="fu">grep</span> couchdb</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check logs</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> logs <span class="at">-f</span> couchdb-for-obsidian</span></code></pre></div>
<h3 id="step-2-create-obsidian-database">Step 2: Create Obsidian
Database</h3>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access CouchDB web interface</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Navigate to: http://&lt;server-ip&gt;:5984/_utils</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Login with credentials from docker-compose.yml</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Click &quot;Create Database&quot;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Database name: obsidian</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Partitioned: No</span></span></code></pre></div>
<h3 id="step-3-install-livesync-plugin-in-obsidian">Step 3: Install
LiveSync Plugin in Obsidian</h3>
<ol type="1">
<li>Open Obsidian</li>
<li>Settings → Community Plugins → Browse</li>
<li>Search: “Self-hosted LiveSync”</li>
<li>Install and Enable</li>
<li>Configure plugin:
<ul>
<li>Remote Database URL:
<code>http://&lt;server-ip&gt;:5984/obsidian</code></li>
<li>Username: <code>admin</code></li>
<li>Password: Your CouchDB password</li>
<li>Device name: <code>laptop-primary</code> (or descriptive name)</li>
</ul></li>
</ol>
<h2 id="key-issues-resolutions">Key Issues &amp; Resolutions</h2>
<h3 id="issue-1-missing-docker-compose">Issue 1: Missing Docker
Compose</h3>
<p><strong>Problem:</strong> <code>docker-compose</code> command not
found when managing Docker containers.</p>
<p><strong>Symptoms:</strong></p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker-compose up <span class="at">-d</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">bash:</span> docker-compose: command not found</span></code></pre></div>
<p><strong>Resolution:</strong></p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Docker Compose on Ubuntu</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> curl <span class="at">-L</span> <span class="st">&quot;https://github.com/docker/compose/releases/download/v2.23.0/docker-compose-</span><span class="va">$(</span><span class="fu">uname</span> <span class="at">-s</span><span class="va">)</span><span class="st">-</span><span class="va">$(</span><span class="fu">uname</span> <span class="at">-m</span><span class="va">)</span><span class="st">&quot;</span> <span class="at">-o</span> /usr/local/bin/docker-compose</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set executable permissions</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chmod +x /usr/local/bin/docker-compose</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify installation</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> <span class="at">--version</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternative: Use docker compose (V2 plugin)</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose version</span></code></pre></div>
<h3 id="issue-2-cors-configuration-for-couchdb">Issue 2: CORS
Configuration for CouchDB</h3>
<p><strong>Problem:</strong> Native fetch API failed with CORS error
during LiveSync.</p>
<p><strong>Error Message:</strong></p>
<pre><code>Access to fetch at &#39;http://server-ip:5984/obsidian&#39; from origin &#39;app://obsidian.md&#39; 
has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present.</code></pre>
<p><strong>Resolution:</strong></p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access CouchDB container</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> couchdb-for-obsidian bash</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit local.ini configuration</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> /opt/couchdb/etc/local.d/local.ini</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Add CORS configuration:</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="ex">[httpd]</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="ex">enable_cors</span> = true</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="ex">[cors]</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="ex">origins</span> = <span class="pp">*</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="ex">credentials</span> = true</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="ex">methods</span> = GET, PUT, POST, HEAD, DELETE</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="ex">headers</span> = accept, authorization, content-type, origin, referer</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Exit container</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="bu">exit</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Restart CouchDB</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> restart couchdb-for-obsidian</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify CORS headers</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-I</span> http://localhost:5984/obsidian</span></code></pre></div>
<h3 id="issue-3-configuration-mismatch---chunk-size">Issue 3:
Configuration Mismatch - Chunk Size</h3>
<p><strong>Problem:</strong> Local LiveSync client reported
<code>customChunkSize</code> mismatch (local 60 vs remote 0).</p>
<p><strong>Error in Obsidian:</strong></p>
<pre><code>Configuration mismatch detected:
- Local chunk size: 60
- Remote chunk size: 0
This may cause sync issues.</code></pre>
<p><strong>Resolution:</strong></p>
<ol type="1">
<li><strong>In Obsidian Settings → Self-hosted LiveSync:</strong>
<ul>
<li>Scroll to <strong>Advanced Settings</strong></li>
<li>Set <strong>Custom Chunk Size</strong>: <code>60</code></li>
<li>Click <strong>Save</strong></li>
</ul></li>
<li><strong>Accept Remote Update Prompt:</strong>
<ul>
<li>When prompted: “Configuration mismatch, accept remote
settings?”</li>
<li>Click <strong>“Use local settings”</strong> (preferred)</li>
<li>Or click <strong>“Use remote settings”</strong> if remote is
trusted</li>
</ul></li>
<li><strong>Verify Consistency Across All Devices:</strong>
<ul>
<li>Repeat on each device</li>
<li>Ensure all use same chunk size (60 recommended)</li>
</ul></li>
</ol>
<p><strong>Why 60?</strong> - Balance between efficiency and
compatibility - Works well with most network conditions - Recommended by
LiveSync documentation</p>
<h3 id="issue-4-filename-case-sensitivity">Issue 4: Filename Case
Sensitivity</h3>
<p><strong>Problem:</strong> Potential sync conflicts due to file name
case sensitivity across Linux, Windows, and Android devices.</p>
<p><strong>Scenario:</strong></p>
<pre><code>Linux: Creates &quot;MyNote.md&quot; and &quot;mynote.md&quot; (two different files)
Windows: Sees only one file (case-insensitive filesystem)
Result: Sync conflict!</code></pre>
<p><strong>Resolution:</strong></p>
<p><strong>In Obsidian LiveSync Settings:</strong></p>
<pre><code>Settings → Self-hosted LiveSync → Advanced

handleFilenameCaseSensitive:
- Set to FALSE if syncing with Windows/macOS/Android
- Set to TRUE only if ALL clients use case-sensitive filesystems</code></pre>
<p><strong>Best Practice:</strong> - Use consistent naming convention
(e.g., all lowercase) - Avoid creating files with names differing only
in case - Document your naming convention in vault</p>
<h3 id="issue-5-end-to-end-encryption-algorithm-update">Issue 5:
End-to-End Encryption Algorithm Update</h3>
<p><strong>Problem:</strong> Older E2EE version detected with known
vulnerabilities.</p>
<p><strong>Warning Message:</strong></p>
<pre><code>You are using E2EE v1 which has known security issues.
Please upgrade to E2EE v2 for improved security.</code></pre>
<p><strong>Resolution:</strong></p>
<ol type="1">
<li><p><strong>Backup Your Vault:</strong></p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create backup before upgrade</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-czf</span> obsidian-backup-<span class="va">$(</span><span class="fu">date</span> +%Y%m%d<span class="va">)</span>.tar.gz ~/path/to/vault</span></code></pre></div></li>
<li><p><strong>Upgrade to E2EE v2:</strong></p>
<ul>
<li>Settings → Self-hosted LiveSync → Encryption</li>
<li>Click <strong>“Upgrade to E2EE v2”</strong></li>
<li>Confirm upgrade</li>
<li><strong>New passphrase required</strong> - save securely!</li>
</ul></li>
<li><p><strong>Update All Clients:</strong></p>
<ul>
<li>Ensure all devices run LiveSync plugin version 0.25.0+</li>
<li>Update plugin on each device</li>
<li>Enter new E2EE v2 passphrase</li>
</ul></li>
</ol>
<p><strong>Security Improvements in v2:</strong> - Stronger encryption
algorithms - Improved key derivation - Better protection against
brute-force attacks</p>
<h3 id="issue-6-vault-rebuild-confirmation">Issue 6: Vault Rebuild
Confirmation</h3>
<p><strong>Problem:</strong> Sync metadata rebuild required due to
remote database corruption or config changes.</p>
<p><strong>When This Happens:</strong> - After major plugin updates -
After database restoration - After changing encryption settings - After
resolving sync conflicts</p>
<p><strong>Resolution:</strong></p>
<ol type="1">
<li><p><strong>Backup Current State:</strong></p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Export vault</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> <span class="at">-r</span> ~/vault ~/vault-backup-<span class="va">$(</span><span class="fu">date</span> +%Y%m%d<span class="va">)</span></span></code></pre></div></li>
<li><p><strong>Confirm Rebuild in LiveSync:</strong></p>
<ul>
<li>Settings → Self-hosted LiveSync</li>
<li>Click <strong>“Rebuild database”</strong></li>
<li>Confirm: “Are you sure?”</li>
<li>Wait for process to complete (may take several minutes)</li>
</ul></li>
<li><p><strong>Verify Rebuild Success:</strong></p>
<ul>
<li>Check sync status indicator (should show green)</li>
<li>Make test change on one device</li>
<li>Verify it syncs to other devices</li>
</ul></li>
</ol>
<p><strong>What Rebuild Does:</strong> - Recreates local sync metadata -
Re-indexes all files - Resolves inconsistencies - Does NOT delete your
notes (safe operation)</p>
<h3 id="issue-7-connectivity-issues-with-couchdb">Issue 7: Connectivity
Issues with CouchDB</h3>
<p><strong>Problem:</strong> <code>Could not connect to server</code>
messages during sync attempts.</p>
<p><strong>Possible Causes:</strong> 1. CouchDB container not running 2.
Network firewall blocking port 5984 3. Incorrect URL in LiveSync
settings 4. Certificate issues (if using HTTPS)</p>
<p><strong>Resolution:</strong></p>
<p><strong>Verify Container Status:</strong></p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if container is running</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> ps <span class="kw">|</span> <span class="fu">grep</span> couchdb</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># If not running, start it</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> start couchdb-for-obsidian</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check logs for errors</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> logs <span class="at">--tail</span> 50 couchdb-for-obsidian</span></code></pre></div>
<p><strong>Check Network Connectivity:</strong></p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test from client machine</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> http://<span class="op">&lt;</span>server-ip<span class="op">&gt;</span>:5984</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected response:</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># {&quot;couchdb&quot;:&quot;Welcome&quot;,&quot;version&quot;:&quot;3.x.x&quot;}</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Test database access</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> http://<span class="op">&lt;</span>server-ip<span class="op">&gt;</span>:5984/obsidian</span></code></pre></div>
<p><strong>Verify Firewall Settings:</strong></p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On server, allow port 5984</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ufw allow 5984/tcp</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># On pfSense:</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Firewall → Rules → LAN → Add</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Allow TCP 5984 to CouchDB server IP</span></span></code></pre></div>
<p><strong>Check LiveSync URL Configuration:</strong> - Settings →
Self-hosted LiveSync - Remote Database URL:
<code>http://&lt;server-ip&gt;:5984/obsidian</code> - Ensure NO trailing
slash - Username and password correct</p>
<h2 id="step-by-step-workflow-summary">Step-by-Step Workflow
Summary</h2>
<h3 id="complete-setup-checklist">Complete Setup Checklist</h3>
<ol type="1">
<li><strong>Server Preparation:</strong>
<ul class="task-list">
<li><label><input type="checkbox" />Install Docker and Docker
Compose</label></li>
<li><label><input type="checkbox" />Create docker-compose.yml for
CouchDB</label></li>
<li><label><input type="checkbox" />Deploy CouchDB
container</label></li>
<li><label><input type="checkbox" />Verify CouchDB accessible on port
5984</label></li>
</ul></li>
<li><strong>Database Configuration:</strong>
<ul class="task-list">
<li><label><input type="checkbox" />Access CouchDB web UI
(<code>http://&lt;ip&gt;:5984/_utils</code>)</label></li>
<li><label><input type="checkbox" />Create database named
“obsidian”</label></li>
<li><label><input type="checkbox" />Configure CORS in
local.ini</label></li>
<li><label><input type="checkbox" />Restart CouchDB
container</label></li>
</ul></li>
<li><strong>LiveSync Plugin Setup:</strong>
<ul class="task-list">
<li><label><input type="checkbox" />Install Self-hosted LiveSync plugin
in Obsidian</label></li>
<li><label><input type="checkbox" />Configure remote database
URL</label></li>
<li><label><input type="checkbox" />Set username and
password</label></li>
<li><label><input type="checkbox" />Set customChunkSize =
60</label></li>
<li><label><input type="checkbox" />Configure case sensitivity (FALSE
for mixed OS)</label></li>
<li><label><input type="checkbox" />Upgrade to E2EE v2</label></li>
</ul></li>
<li><strong>Initial Sync:</strong>
<ul class="task-list">
<li><label><input type="checkbox" />Click “Start sync” in plugin
settings</label></li>
<li><label><input type="checkbox" />Wait for initial upload (may take
time for large vaults)</label></li>
<li><label><input type="checkbox" />Verify sync status shows green
checkmark</label></li>
</ul></li>
<li><strong>Multi-Device Setup:</strong>
<ul class="task-list">
<li><label><input type="checkbox" />Install Obsidian on second
device</label></li>
<li><label><input type="checkbox" />Install LiveSync plugin</label></li>
<li><label><input type="checkbox" />Use SAME configuration (URL,
credentials, chunk size)</label></li>
<li><label><input type="checkbox" />Choose “Fetch from remote” for first
sync</label></li>
<li><label><input type="checkbox" />Verify files appear</label></li>
</ul></li>
<li><strong>Ongoing Maintenance:</strong>
<ul class="task-list">
<li><label><input type="checkbox" />Monitor sync status
regularly</label></li>
<li><label><input type="checkbox" />Review CouchDB logs
weekly</label></li>
<li><label><input type="checkbox" />Backup database monthly</label></li>
<li><label><input type="checkbox" />Update LiveSync plugin when
available</label></li>
<li><label><input type="checkbox" />Test recovery procedure
periodically</label></li>
</ul></li>
</ol>
<h2 id="performance-optimization">Performance Optimization</h2>
<h3 id="recommended-settings">Recommended Settings</h3>
<pre><code>LiveSync Settings:

Sync Mode: Automatic
Sync Interval: 30 seconds (balance responsiveness and battery)
Batch Size: 50 (default, increase for faster sync)
Chunk Size: 60 (for compatibility)
Timeout: 120 seconds

Advanced:
- Compress database: Yes
- Use chunked sync: Yes
- Verify checksum: Yes (slower but safer)</code></pre>
<h3 id="database-maintenance">Database Maintenance</h3>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compact database (reduces size)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-X</span> POST http://admin:password@localhost:5984/obsidian/_compact <span class="dt">\</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">-H</span> <span class="st">&quot;Content-Type: application/json&quot;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># View database stats</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> http://admin:password@localhost:5984/obsidian</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Backup database</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-X</span> GET http://admin:password@localhost:5984/obsidian/_all_docs<span class="pp">?</span>include_docs=true <span class="dt">\</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>     <span class="op">&gt;</span> obsidian-backup-<span class="va">$(</span><span class="fu">date</span> +%Y%m%d<span class="va">)</span>.json</span></code></pre></div>
<h2 id="security-best-practices">Security Best Practices</h2>
<h3 id="use-https-for-remote-access">1. Use HTTPS for Remote Access</h3>
<pre class="nginx"><code># Nginx reverse proxy configuration
server {
    listen 443 ssl;
    server_name sync.yourdomain.com;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    location / {
        proxy_pass http://localhost:5984;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}</code></pre>
<h3 id="restrict-access-by-ip">2. Restrict Access by IP</h3>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In CouchDB local.ini</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="ex">[httpd]</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="ex">bind_address</span> = 192.168.1.100  <span class="co"># Only accept connections from specific IP</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Or use firewall</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ufw allow from 192.168.1.0/24 to any port 5984</span></code></pre></div>
<h3 id="enable-e2ee-v2">3. Enable E2EE v2</h3>
<ul>
<li>Always use End-to-End Encryption</li>
<li>Use strong passphrase (20+ characters)</li>
<li>Store passphrase in password manager</li>
<li>Don’t share passphrase insecurely</li>
</ul>
<h2 id="troubleshooting-tips">Troubleshooting Tips</h2>
<h3 id="sync-not-working">Sync Not Working</h3>
<ol type="1">
<li>Check sync status indicator in Obsidian</li>
<li>Review LiveSync logs (Settings → Show log)</li>
<li>Verify network connectivity to CouchDB</li>
<li>Check CouchDB container logs</li>
<li>Rebuild database if persistent issues</li>
</ol>
<h3 id="conflicts-appearing">Conflicts Appearing</h3>
<ol type="1">
<li>Review conflict files in <code>.conflicts/</code> folder</li>
<li>Manually resolve conflicts</li>
<li>Delete resolved conflict files</li>
<li>Consider adjusting sync interval</li>
</ol>
<h3 id="high-cpumemory-usage">High CPU/Memory Usage</h3>
<ol type="1">
<li>Reduce sync frequency</li>
<li>Compact CouchDB database</li>
<li>Limit vault size (separate large media files)</li>
<li>Upgrade server hardware if needed</li>
</ol>
<h2 id="references">References</h2>
<ul>
<li><a
href="https://dev.to/lightningdev123/how-to-set-up-a-self-hosted-obsidian-sync-server-hcn">Obsidian
Self-hosted LiveSync Setup Guide</a></li>
<li><a
href="https://docs.couchdb.org/en/stable/config/index.html">CouchDB
Configuration Docs</a></li>
<li><a href="https://github.com/vrtmrz/obsidian-livesync">Official
Obsidian LiveSync GitHub</a></li>
</ul>
<h2 id="notes">Notes</h2>
<p>Maintain configuration consistency across devices and apply updates
promptly to ensure secure, reliable synchronization of your Obsidian
vault. Regular backups of both the vault and CouchDB database are
essential for disaster recovery.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Self-hosting Obsidian sync with CouchDB provides complete control
over your notes while saving subscription costs. The initial setup
requires attention to detail, but once configured properly, it provides
reliable, encrypted synchronization across all your devices.</p>
<p><strong>Key Takeaways:</strong> - CORS configuration is critical for
web access - Consistent chunk size prevents sync errors - E2EE v2
provides strong security - Regular database maintenance ensures
performance - Proper backups prevent data loss</p>
<p><em>Document created: 2025-10-25</em>
<!-- Touched: Wed Nov 19 13:33:27 +01 2025 -->
<!-- Touched: Wed Nov 19 14:03:35 +01 2025 -->
<!-- Touched: Wed Nov 19 15:04:19 +01 2025 --></p>
                </div>

                <div class="article-navigation">
                </div>
            </div>
        </section>
    </main>

    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>OLYAHYAI</h3>
                    <p>Pentester in Training | Cybersecurity Enthusiast</p>
                </div>

                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/index.html#home">Home</a></li>
                        <li><a href="/index.html#about">About</a></li>
                        <li><a href="/index.html#projects">Projects</a></li>
                        <li><a href="/blog/index.html">Blog</a></li>
                    </ul>
                </div>

                <div class="footer-social">
                    <h4>Connect</h4>
                    <div class="social-links">
                        <a href="https://github.com/OLYAHYAI" target="_blank" rel="noopener">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="https://ma.linkedin.com/in/lyahyai-omar" target="_blank" rel="noopener">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="mailto:contact@olyahyai.com">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 OLYAHYAI. All rights reserved.</p>
                <p>Built with <i class="fas fa-heart"></i> and <i class="fas fa-terminal"></i></p>
            </div>
        </div>
    </footer>

    <button class="back-to-top" aria-label="Back to top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <script src="../../js/main.js"></script>
    <script src="../../js/animations.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>