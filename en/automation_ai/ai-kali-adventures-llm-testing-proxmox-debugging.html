<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Testing local LLM deployments on limited homelab hardware and debugging stubborn Kali Linux virtual machines that fail to boot on Proxmox VE.">
    <meta name="keywords" content="automation, filesystem, homelab">
    <meta name="author" content="OLYAHYAI">

    <title>Ai Kali Adventures Llm Testing Proxmox Debugging | Omar LYAHYAI Technical Blog</title>

    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/responsive.css">
    <link rel="stylesheet" href="/css/animations.css">
    <link rel="stylesheet" href="/css/blog.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body class="dark-theme">
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header class="header" role="banner">
        <nav class="navbar" role="navigation" aria-label="Main navigation">
            <div class="container">
                <div class="nav-brand">
                    <a href="/index.html" class="logo">
                        <i class="fas fa-terminal"></i>
                        <span>OLYAHYAI</span>
                    </a>
                </div>

                <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
                    <span class="hamburger"></span>
                </button>

                <ul class="nav-menu">
                    <li><a href="/index.html#home" class="nav-link">Home</a></li>
                    <li><a href="/index.html#about" class="nav-link">About</a></li>
                    <li><a href="/index.html#projects" class="nav-link">Projects</a></li>
                    <li><a href="/index.html#skills" class="nav-link">Skills</a></li>
                    <li><a href="/blog/index.html" class="nav-link active">Blog</a></li>
                    <li><a href="/index.html#contact" class="nav-link">Contact</a></li>
                </ul>

                <div class="nav-actions">
                    <a href="/fr/automation_ai/ai-kali-adventures-llm-testing-proxmox-debugging.html" class="lang-toggle" aria-label="Change language">
                        <span class="lang-current">FR</span>
                        <i class="fas fa-globe"></i>
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <main id="main-content">
        <section class="article-header" role="region" aria-label="Article header">
            <div class="container">
                <div class="article-breadcrumb">
                    <nav class="breadcrumb" aria-label="Breadcrumb">
                        <a href="/index.html">Home</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <a href="/blog/index.html">Blog</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <a href="/blog/automation_ai.html">Automation & AI</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <span>Ai Kali Adventures Llm Testing Proxmox Debugging</span>
                    </nav>
                </div>

                <h1 class="article-title">Ai Kali Adventures Llm Testing Proxmox Debugging</h1>

                <div class="article-meta">
                    <div class="article-meta-item">
                        <i class="far fa-calendar"></i>
                        <span>2025-11-19</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="far fa-clock"></i>
                        <span>5 min min read</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="fas fa-folder"></i>
                        <span>Automation & AI</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="fas fa-tags"></i>
                        <span>automation, filesystem, homelab</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="article-content" role="region" aria-label="Article content">
            <div class="container">
                <div class="article-body">
                    <!-- 
TEMPLATE - Press Alt+E to apply

UPDATE THESE FIELDS:
- title: "Your Title" (KEEP QUOTES)
- date: "YYYY-MM-DD" (KEEP QUOTES)
- category: infrastructure/network_security/automation_ai/reference
- language: auto (let workflow detect) | en (force English) | fr (force French)
- tags: single-keyword-only (NO COMMAS! Use one word or hyphenated)
- description: "Short summary" (KEEP QUOTES)

CRITICAL RULES:
✅ DO: Keep quotes around title, date, description
✅ DO: Use "auto" for language to let workflow detect from content
✅ DO: Use single word for tags (homelab, pfsense, proxmox)
❌ DON'T: Use commas in tags (breaks YAML!)
❌ DON'T: Remove quotes from title/date/description

The workflow will:
- Detect language automatically from your content
- Generate English + French versions
- Create full HTML with navigation
- Preserve images and links
-->
<!-- 
TEMPLATE - Press Alt+E to apply

UPDATE THESE FIELDS:
- title: "Your Title" (KEEP QUOTES)
- date: "YYYY-MM-DD" (KEEP QUOTES)
- category: infrastructure/network_security/automation_ai/reference
- language: auto (let workflow detect) | en (force English) | fr (force French)
- tags: single-keyword-only (NO COMMAS! Use one word or hyphenated)
- description: "Short summary" (KEEP QUOTES)

CRITICAL RULES:
✅ DO: Keep quotes around title, date, description
✅ DO: Use "auto" for language to let workflow detect from content
✅ DO: Use single word for tags (homelab, pfsense, proxmox)
❌ DON'T: Use commas in tags (breaks YAML!)
❌ DON'T: Remove quotes from title/date/description

The workflow will:
- Detect language automatically from your content
- Generate English + French versions
- Create full HTML with navigation
- Preserve images and links
-->
<h1 id="my-ai-and-kali-adventures-llm-testing-and-proxmox-debugging">My
AI and Kali Adventures: LLM Testing and Proxmox Debugging</h1>
<h2 id="session-overview">Session Overview</h2>
<p>This session combined two fascinating homelab challenges: testing
local LLM (Large Language Model) deployment on limited hardware, and
debugging a stubborn Kali Linux VM that refused to boot on Proxmox. Both
problems taught valuable lessons about resource management and
virtualization troubleshooting.</p>
<h2 id="part-1-local-llm-testing-on-consumer-hardware">Part 1: Local LLM
Testing on Consumer Hardware</h2>
<h3 id="the-goal">The Goal</h3>
<p>Run open-source LLMs locally on a ThinkPad E14 Gen 2 for: -
Privacy-preserving AI assistance - Offline access to AI capabilities -
Learning about LLM quantization and optimization - Code completion and
development support</p>
<h3 id="hardware-constraints">Hardware Constraints</h3>
<p><strong>ThinkPad E14 Gen 2 Specifications:</strong> -
<strong>CPU</strong>: Intel i5-1135G7 (4 cores, 8 threads) -
<strong>RAM</strong>: 16 GB DDR4 - <strong>Storage</strong>: 256 GB SSD
- <strong>GPU</strong>: Intel Iris Xe (integrated, Vulkan support) -
<strong>Limitations</strong>: No dedicated GPU, limited RAM</p>
<h3 id="llm-model-evaluation">LLM Model Evaluation</h3>
<h4 id="attempt-1-gpt-oss-20b">Attempt 1: GPT-OSS-20B</h4>
<p><strong>Model Specifications:</strong> - <strong>Size</strong>: 21
billion parameters - <strong>Quantization</strong>: 4-bit (Q4) -
<strong>File Size</strong>: ~12 GB - <strong>License</strong>: Apache
2.0 (commercial use allowed)</p>
<p><strong>Compatibility Assessment:</strong></p>
<pre><code>Model Requirements:
├── VRAM: ~8 GB (GPU)
├── System RAM: ~16 GB minimum
├── Storage: 12 GB for model
└── Performance: Dedicated GPU recommended

Available Resources:
├── VRAM: ~2 GB (shared with system)
├── System RAM: 16 GB (but OS needs ~4 GB)
├── Storage: 256 GB (adequate)
└── GPU: Integrated Iris Xe</code></pre>
<p><strong>Result</strong>: ❌ <strong>Incompatible</strong></p>
<p><strong>Reasons:</strong> 1. <strong>Insufficient RAM</strong>: Model
would consume ~12 GB, leaving only 4 GB for OS 2. <strong>No Dedicated
GPU</strong>: Iris Xe can’t handle 20B parameter model efficiently 3.
<strong>Performance</strong>: Would experience extreme slowdowns (10+
seconds per token) 4. <strong>Risk of System Crash</strong>:
Out-of-memory errors likely</p>
<h4 id="attempt-2-mistral-7b-q4">Attempt 2: Mistral 7B (Q4)</h4>
<p><strong>Model Options Discovered:</strong> 1.
<strong>mistral-7b-ielts-evaluator-q4</strong> (specialized for IELTS
evaluation) 2. <strong>Mistral-7B-Instruct-v0.1-Q4_K_M</strong> (general
purpose) ✓ <strong>Recommended</strong></p>
<p><strong>Model Specifications:</strong> - <strong>Size</strong>: 7
billion parameters - <strong>Quantization</strong>: Q4_K_M (4-bit with
mixed precision) - <strong>File Size</strong>: ~4.3 GB -
<strong>Performance</strong>: Optimized for CPU inference</p>
<p><strong>Compatibility Assessment:</strong></p>
<pre><code>Model Requirements:
├── RAM: ~6 GB (model + overhead)
├── Storage: 4.3 GB
├── CPU: Multi-core (4+ cores recommended)
└── Acceleration: AVX2, Vulkan optional

Available Resources:
├── RAM: 16 GB ✓
├── Storage: 256 GB ✓
├── CPU: i5-1135G7 (4 cores) ✓
└── Acceleration: AVX2 ✓, Vulkan ✓</code></pre>
<p><strong>Result</strong>: ✅ <strong>Compatible</strong></p>
<p><strong>Expected Performance:</strong> - Tokens per second: 2-5 (CPU)
- Response time: 10-30 seconds for typical query - Memory usage: ~6 GB
during inference</p>
<h3 id="llm-deployment-with-lm-studio">LLM Deployment with LM
Studio</h3>
<h4 id="installation">Installation</h4>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Download LM Studio</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> https://lmstudio.ai/download/linux/latest <span class="at">-O</span> lmstudio.AppImage</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Make executable</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> +x lmstudio.AppImage</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Run</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./lmstudio.AppImage</span></span></code></pre></div>
<h4 id="configuration-for-low-resource-systems">Configuration for
Low-Resource Systems</h4>
<p><strong>Settings → Inference:</strong> - <strong>Context
Length</strong>: 2048 (reduce from 4096 for faster inference) -
<strong>GPU Offload</strong>: 0 layers (CPU-only on integrated GPU) -
<strong>Threads</strong>: 6 (leave 2 cores for system) - <strong>Batch
Size</strong>: 8 (lower = slower but more stable) - <strong>Use
mlock</strong>: ✓ (keep model in RAM, prevent swapping)</p>
<p><strong>Settings → Model:</strong> - <strong>Temperature</strong>:
0.7 - <strong>Top P</strong>: 0.9 - <strong>Repeat Penalty</strong>:
1.1</p>
<h3 id="alternative-llm-options-for-constrained-hardware">Alternative
LLM Options for Constrained Hardware</h3>
<h4 id="tinyllama-1.1b-ultra-lightweight">TinyLlama 1.1B
(Ultra-Lightweight)</h4>
<p><strong>Specifications:</strong> - Size: 1.1 billion parameters -
File Size: ~700 MB (Q4) - RAM Usage: ~2 GB - Performance: 10-20
tokens/sec on CPU</p>
<p><strong>Use Cases:</strong> - Code completion - Simple chat - Quick
prototyping</p>
<p><strong>Installation:</strong></p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In LM Studio, search for:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">TinyLlama-1.1B-Chat-v1.0-Q4_K_M</span></span></code></pre></div>
<h4 id="phi-2-2.7b---microsoft">Phi-2 (2.7B) - Microsoft</h4>
<p><strong>Specifications:</strong> - Size: 2.7 billion parameters -
File Size: ~1.6 GB (Q4) - RAM Usage: ~3 GB - Performance: 5-10
tokens/sec</p>
<p><strong>Advantages:</strong> - Trained on high-quality code and
reasoning data - Excellent for programming tasks - Efficient
architecture</p>
<p><strong>Installation:</strong></p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In LM Studio:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">microsoft/phi-2-Q4_K_M</span></span></code></pre></div>
<h3 id="performance-optimization-techniques">Performance Optimization
Techniques</h3>
<h4 id="use-quantization">1. Use Quantization</h4>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Quantization levels (from most to least compressed):</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Q2_K</span>   <span class="co"># 2-bit: Fastest, lowest quality</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Q4_K_M</span> <span class="co"># 4-bit: Balanced (recommended)</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Q5_K_M</span> <span class="co"># 5-bit: Better quality, slower</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Q8_0</span>   <span class="co"># 8-bit: Best quality, slowest</span></span></code></pre></div>
<h4 id="optimize-cpu-inference">2. Optimize CPU Inference</h4>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable AVX2 acceleration</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">OMP_NUM_THREADS</span><span class="op">=</span>6</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Use llama.cpp with optimizations</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="ex">./main</span> <span class="at">-m</span> model.gguf <span class="dt">\</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">-t</span> 6 <span class="dt">\</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">--mlock</span> <span class="dt">\</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">-ngl</span> 0 <span class="dt">\</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">--ctx-size</span> 2048</span></code></pre></div>
<h4 id="monitor-resource-usage">3. Monitor Resource Usage</h4>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install monitoring tools</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install htop nvtop</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Monitor during inference</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="ex">htop</span>  <span class="co"># CPU and RAM</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="ex">watch</span> <span class="at">-n</span> 1 free <span class="at">-h</span>  <span class="co"># Memory usage</span></span></code></pre></div>
<h2 id="part-2-proxmox-vm-debugging---kali-linux-boot-failure">Part 2:
Proxmox VM Debugging - Kali Linux Boot Failure</h2>
<h3 id="the-error">The Error</h3>
<pre><code>Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</code></pre>
<h3 id="problem-analysis">Problem Analysis</h3>
<p>This cryptic error indicates the kernel can’t find or mount the root
filesystem. Common causes in virtualized environments:</p>
<ol type="1">
<li><strong>GRUB Misconfiguration</strong>: Wrong <code>root=</code>
parameter</li>
<li><strong>Missing EFI Partition</strong>: UEFI boot without EFI
disk</li>
<li><strong>Incompatible Disk Controller</strong>: Wrong SCSI controller
type</li>
<li><strong>Corrupted Initramfs</strong>: Missing drivers in initial
ramdisk</li>
</ol>
<h3 id="debugging-process">Debugging Process</h3>
<h4 id="step-1-verify-bios-type">Step 1: Verify BIOS Type</h4>
<p><strong>Initial Configuration:</strong> - BIOS: SeaBIOS (legacy BIOS)
- Machine Type: i440fx - Disk: SCSI with iothread enabled</p>
<p><strong>Warning Encountered:</strong></p>
<pre><code>WARN: iothread is only valid with virtio disk or virtio-scsi-single controller, ignoring</code></pre>
<p><strong>Issue</strong>: SCSI controller type doesn’t support
iothread, but warning was ignored during VM creation.</p>
<h4 id="step-2-try-ovmf-uefi-boot">Step 2: Try OVMF (UEFI) Boot</h4>
<p><strong>Changes Made:</strong> 1. BIOS: SeaBIOS → <strong>OVMF
(UEFI)</strong> 2. Added <strong>EFI Disk</strong> via Hardware → Add →
EFI Disk 3. Machine Type: i440fx → <strong>q35</strong> (modern
chipset)</p>
<p><strong>Result</strong>: ❌ Still failed to boot</p>
<p><strong>Analysis</strong>: OVMF requires specific partition layout
and EFI boot loader installed during OS installation. Switching BIOS
type post-installation doesn’t work.</p>
<h4 id="step-3-fix-scsi-controller">Step 3: Fix SCSI Controller</h4>
<p><strong>Root Cause Identified:</strong></p>
<p>The warning about iothread was critical: - iothread requires
<strong>VirtIO SCSI Single</strong> controller - VM was using standard
<strong>SCSI</strong> controller - Kernel couldn’t communicate with disk
properly</p>
<p><strong>Resolution:</strong></p>
<ol type="1">
<li><p>Shutdown VM</p></li>
<li><p>Remove existing disk</p></li>
<li><p>Add disk with correct configuration:</p>
<ul>
<li>Bus/Device: <strong>SCSI</strong></li>
<li>Storage: local-lvm</li>
<li>SCSI Controller: <strong>VirtIO SCSI Single</strong></li>
<li>iothread: ✓</li>
</ul></li>
<li><p>Update VM Configuration:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit VM config</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> /etc/pve/qemu-server/101.conf</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure controller is set correctly:</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="ex">scsihw:</span> virtio-scsi-single</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify disk uses correct controller:</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="ex">scsi0:</span> local-lvm:vm-101-disk-0,iothread=1</span></code></pre></div></li>
<li><p>Reboot VM</p></li>
</ol>
<p><strong>Result</strong>: ✅ <strong>Boot Successful!</strong></p>
<h3 id="final-working-configuration">Final Working Configuration</h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># /etc/pve/qemu-server/101.conf</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="ex">agent:</span> 1</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="ex">bios:</span> seabios</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="ex">boot:</span> order=scsi0<span class="kw">;</span><span class="ex">ide2</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="ex">cores:</span> 4</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="ex">cpu:</span> host</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="ex">ide2:</span> local:iso/kali-linux-2024.4-installer-amd64.iso,media=cdrom</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="ex">machine:</span> i440fx</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="ex">memory:</span> 8192</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="ex">name:</span> kali-pentest</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="ex">net0:</span> virtio=XX:XX:XX:XX:XX:XX,bridge=vmbr1,firewall=0</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="ex">numa:</span> 0</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="ex">ostype:</span> l26</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="ex">scsi0:</span> local-lvm:vm-101-disk-0,iothread=1,size=80G</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="ex">scsihw:</span> virtio-scsi-single</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="ex">smbios1:</span> uuid=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="ex">sockets:</span> 1</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="ex">vmgenid:</span> XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</span></code></pre></div>
<h3 id="key-lessons-from-debugging">Key Lessons from Debugging</h3>
<ol type="1">
<li><strong>Read Warnings Carefully</strong>: The iothread warning was
the critical clue</li>
<li><strong>BIOS Type Matters</strong>: Can’t switch between SeaBIOS and
OVMF post-install</li>
<li><strong>Controller Compatibility</strong>: VirtIO SCSI Single
required for advanced features</li>
<li><strong>Machine Type</strong>: q35 for modern hardware, i440fx for
compatibility</li>
</ol>
<h2 id="recommendations-for-similar-setups">Recommendations for Similar
Setups</h2>
<h3 id="for-llm-testing-on-limited-hardware">For LLM Testing on Limited
Hardware:</h3>
<p><strong>Recommended Models (by use case):</strong></p>
<pre><code>Light Tasks (2-4 GB RAM available):
├── TinyLlama 1.1B (~700 MB, fast)
└── Phi-2 2.7B (~1.6 GB, good for code)

Medium Tasks (6-8 GB RAM available):
├── Mistral 7B Q4 (~4.3 GB, balanced)
├── Llama 2 7B Q4 (~3.8 GB, general purpose)
└── CodeLlama 7B Q4 (~4.3 GB, coding focused)

Heavy Tasks (12+ GB RAM available):
└── Upgrade hardware or use cloud services</code></pre>
<p><strong>Optimization Checklist:</strong> - [ ] Use Q4 quantization
for best size/quality balance - [ ] Enable AVX2 CPU acceleration - [ ]
Set context length to 2048 for faster inference - [ ] Use 75% of
available CPU threads - [ ] Monitor RAM usage with <code>htop</code> - [
] Consider external SSD if storage limited</p>
<h3 id="for-proxmox-vm-configuration">For Proxmox VM Configuration:</h3>
<p><strong>Best Practices:</strong></p>
<pre><code>SeaBIOS (Legacy Boot):
├── Machine: i440fx
├── SCSI Controller: VirtIO SCSI Single
├── Disk: SCSI with iothread=1
└── Use for: Linux, older OSes

OVMF (UEFI Boot):
├── Machine: q35
├── Add EFI Disk during VM creation
├── SCSI Controller: VirtIO SCSI Single
└── Use for: Modern OSes, Windows, secure boot</code></pre>
<p><strong>Troubleshooting Workflow:</strong></p>
<ol type="1">
<li><strong>Check Proxmox Warnings</strong>: Don’t ignore yellow text in
logs</li>
<li><strong>Verify Controller Compatibility</strong>: Match controller
to features</li>
<li><strong>Test Boot Order</strong>: Ensure disk is first in boot
sequence</li>
<li><strong>Check GRUB Config</strong>: Verify root= parameter in VM
console</li>
<li><strong>Use Snapshots</strong>: Before making major configuration
changes</li>
</ol>
<h2 id="tools-and-resources">Tools and Resources</h2>
<h3 id="llm-tools">LLM Tools:</h3>
<ul>
<li><strong>LM Studio</strong>: User-friendly GUI for model
management</li>
<li><strong>llama.cpp</strong>: Command-line inference engine</li>
<li><strong>Ollama</strong>: Docker-based LLM deployment</li>
<li><strong>Jan AI</strong>: Lightweight alternative to LM Studio</li>
</ul>
<h3 id="proxmox-debugging">Proxmox Debugging:</h3>
<ul>
<li><strong>System Logs</strong>: <code>/var/log/pve/tasks/</code></li>
<li><strong>VM Logs</strong>: <code>/var/log/qemu-server/</code></li>
<li><strong>Configuration</strong>:
<code>/etc/pve/qemu-server/</code></li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>This session demonstrated two critical homelab skills:</p>
<ol type="1">
<li><strong>Resource Assessment</strong>: Understanding hardware
limitations and choosing appropriate solutions (7B models vs 20B
models)</li>
<li><strong>Systematic Debugging</strong>: Following error messages and
warnings to identify root causes (iothread + controller
compatibility)</li>
</ol>
<p>Both challenges reinforced the importance of: - Reading documentation
thoroughly - Monitoring resource constraints - Testing incrementally -
Documenting configurations</p>
<p>The working Kali VM and functional LLM setup provide a solid
foundation for future security research and AI-assisted development
work.</p>
<p><em>Next steps: Integrate Mistral 7B with coding workflows and deploy
vulnerable VMs for Kali pentesting practice.</em></p>
                </div>

                <div class="article-navigation">
                </div>
            </div>
        </section>
    </main>

    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>OLYAHYAI</h3>
                    <p>Pentester in Training | Cybersecurity Enthusiast</p>
                </div>

                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/index.html#home">Home</a></li>
                        <li><a href="/index.html#about">About</a></li>
                        <li><a href="/index.html#projects">Projects</a></li>
                        <li><a href="/blog/index.html">Blog</a></li>
                    </ul>
                </div>

                <div class="footer-social">
                    <h4>Connect</h4>
                    <div class="social-links">
                        <a href="https://github.com/OLYAHYAI" target="_blank" rel="noopener">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="https://ma.linkedin.com/in/lyahyai-omar" target="_blank" rel="noopener">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="mailto:contact@olyahyai.com">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 OLYAHYAI. All rights reserved.</p>
                <p>Built with <i class="fas fa-heart"></i> and <i class="fas fa-terminal"></i></p>
            </div>
        </div>
    </footer>

    <button class="back-to-top" aria-label="Back to top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <script src="../../js/main.js"></script>
    <script src="../../js/animations.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>