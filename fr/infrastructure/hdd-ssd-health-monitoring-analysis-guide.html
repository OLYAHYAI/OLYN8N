<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Guide d'analyse et de surveillance de l'état de santé des disques HDD/SSD - Tutoriel et guide technique">
    <meta name="keywords" content="homelab">
    <meta name="author" content="OLYAHYAI">

    <title>Guide d'analyse et de surveillance de l'état de santé des disques HDD/SSD | Blog Technique Omar LYAHYAI</title>

    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/responsive.css">
    <link rel="stylesheet" href="/css/animations.css">
    <link rel="stylesheet" href="/css/blog.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body class="dark-theme">
    <a href="#main-content" class="skip-link">Passer au contenu principal</a>

    <header class="header" role="banner">
        <nav class="navbar" role="navigation" aria-label="Main navigation">
            <div class="container">
                <div class="nav-brand">
                    <a href="/index.html" class="logo">
                        <i class="fas fa-terminal"></i>
                        <span>OLYAHYAI</span>
                    </a>
                </div>

                <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
                    <span class="hamburger"></span>
                </button>

                <ul class="nav-menu">
                    <li><a href="/index.html#home" class="nav-link">Accueil</a></li>
                    <li><a href="/index.html#about" class="nav-link">À propos</a></li>
                    <li><a href="/index.html#projects" class="nav-link">Projets</a></li>
                    <li><a href="/index.html#skills" class="nav-link">Compétences</a></li>
                    <li><a href="/blog/index.html" class="nav-link active">Blog</a></li>
                    <li><a href="/index.html#contact" class="nav-link">Contact</a></li>
                </ul>

                <div class="nav-actions">
                    <a href="/fr/infrastructure/hdd-ssd-health-monitoring-analysis-guide.html" class="lang-toggle" aria-label="Changer de langue">
                        <span class="lang-current">EN</span>
                        <i class="fas fa-globe"></i>
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <main id="main-content">
        <section class="article-header" role="region" aria-label="Article header">
            <div class="container">
                <div class="article-breadcrumb">
                    <nav class="breadcrumb" aria-label="Breadcrumb">
                        <a href="/index.html">Accueil</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <a href="/blog/index.html">Blog</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <a href="/blog/infrastructure.html">Infrastructure</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <span>Guide d'analyse et de surveillance de l'état de santé des disques HDD/SSD</span>
                    </nav>
                </div>

                <h1 class="article-title">Guide d'analyse et de surveillance de l'état de santé des disques HDD/SSD</h1>

                <div class="article-meta">
                    <div class="article-meta-item">
                        <i class="far fa-calendar"></i>
                        <span>2025-11-19</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="far fa-clock"></i>
                        <span>8 min de lecture</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="fas fa-folder"></i>
                        <span>Infrastructure</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="fas fa-tags"></i>
                        <span>homelab</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="article-content" role="region" aria-label="Article content">
            <div class="container">
                <div class="article-body">
                    <!-- 
TEMPLATE - Press Alt+E to apply

UPDATE THESE FIELDS:
- title: "Your Title" (KEEP QUOTES)
- date: "YYYY-MM-DD" (KEEP QUOTES)
- category: infrastructure/network_security/automation_ai/reference
- language: auto (let workflow detect) | en (force English) | fr (force French)
- tags: single-keyword-only (NO COMMAS! Use one word or hyphenated)
- description: "Short summary" (KEEP QUOTES)

CRITICAL RULES:
✅ DO: Keep quotes around title, date, description
✅ DO: Use "auto" for language to let workflow detect from content
✅ DO: Use single word for tags (homelab, pfsense, proxmox)
❌ DON'T: Use commas in tags (breaks YAML!)
❌ DON'T: Remove quotes from title/date/description

The workflow will:
- Detect language automatically from your content
- Generate English + French versions
- Create full HTML with navigation
- Preserve images and links
-->
<h1 id="hddssd-health-monitoring-and-analysis-guide">Guide de surveillance et d'analyse de l'état de santé des disques HDD/SSD</h1>
<p><strong>Mots-clés :</strong> #storage #hardware #maintenance #smart</p>
<h2 id="quick-health-check-commands">Commandes rapides de vérification de l'état de santé</h2>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic disk information</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lsblk</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">lsblk</span> <span class="at">-o</span> NAME,SIZE,TYPE,FSTYPE,MOUNTPOINT</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Check SMART status (quick)</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="ex">smartctl</span> <span class="at">-H</span> /dev/sda</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Full SMART analysis (detailed)</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="ex">smartctl</span> <span class="at">-a</span> /dev/sda</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for disk errors in system log</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">dmesg</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-i</span> <span class="st">&quot;error\|fail&quot;</span> <span class="kw">|</span> <span class="fu">grep</span> sda</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Monitor disk I/O in real-time</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="ex">iostat</span> <span class="at">-x</span> 1</span></code></pre></div>
<hr />
<h2 id="understanding-smart-attributes">Comprendre les attributs SMART</h2>
<h3 id="critical-attributes-to-monitor">Attributs critiques à surveiller</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 9%" />
<col style="width: 34%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr>
<th>Attribut</th>
<th>ID</th>
<th style="text-align: right;">Signification</th>
<th>Niveau de danger</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Reallocated_Sector_Ct</strong></td>
<td>5</td>
<td style="text-align: right;">Secteurs défectueux réalloués</td>
<td>&gt;100 = Avertissement<br>&gt;500 = Critique</td>
</tr>
<tr>
<td><strong>Current_Pending_Sector</strong></td>
<td>197</td>
<td style="text-align: right;">Secteurs en attente de réallocation</td>
<td>&gt;0 = Avertissement<br>&gt;10 = Critique</td>
</tr>
<tr>
<td><strong>Offline_Uncorrectable</strong></td>
<td>198</td>
<td style="text-align: right;">Secteurs qui ne peuvent pas être lus</td>
<td>&gt;0 = Avertissement<br>&gt;10 = Critique</td>
</tr>
<tr>
<td><strong>Reported_Uncorrect</strong></td>
<td>187</td>
<td style="text-align: right;">Erreurs non corrigeables</td>
<td>&gt;0 = Avertissement<br>&gt;100 = Critique</td>
</tr>
<tr>
<td><strong>UDMA_CRC_Error_Count</strong></td>
<td>199</td>
<td style="text-align: right;">Erreurs de câble/connexion</td>
<td>&gt;10 = Vérifiez les câbles</td>
</tr>
<tr>
<td><strong>Spin_Retry_Count</strong></td>
<td>10</td>
<td style="text-align: right;">Tentatives de rotation (spin-up) échouées</td>
<td>&gt;0 = Avertissement</td>
</tr>
<tr>
<td><strong>Raw_Read_Error_Rate</strong></td>
<td>1</td>
<td style="text-align: right;">Erreurs de lecture avant ECC</td>
<td>Spécifique au fournisseur</td>
</tr>
</tbody>
</table>
<h3 id="health-status-interpretation">Interprétation de l'état de santé</h3>
<p><strong>RÉUSSI (PASSED):</strong> - Tous les attributs sont dans les seuils - Ne signifie pas que le disque est sain, juste qu'il n'est pas encore en panne</p>
<p><strong>ÉCHEC (FAILING):</strong> - Un ou plusieurs attributs sont sous le seuil - <strong>REMPLACEZ IMMÉDIATEMENT</strong></p>
<hr />
<h2 id="step-by-step-disk-health-analysis">Analyse de l'état de santé du disque étape par étape</h2>
<h3 id="step-1-check-if-disk-is-detected">Étape 1 : Vérifier si le disque est détecté</h3>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List all disks</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lsblk</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected output shows disk name, size, type</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Example:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># sda     8:0    0  250G  0 disk</span></span></code></pre></div>
<p><strong>Si le disque n'apparaît pas :</strong> - Vérifiez la connexion physique - Vérifiez les paramètres BIOS/UEFI - Essayez un autre port/câble SATA</p>
<h3 id="step-2-quick-smart-health-check">Étape 2 : Vérification rapide de l'état de santé SMART</h3>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Quick health check</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">smartctl</span> <span class="at">-H</span> /dev/sda</span></code></pre></div>
<p><strong>Résultats possibles :</strong></p>
<p>✅ <strong>RÉUSSI (PASSED):</strong></p>
<pre><code>SMART overall-health self-assessment test result: PASSED</code></pre>
<ul>
<li>Le disque a réussi le test de santé de base</li>
<li>Poursuivre l'analyse détaillée</li>
</ul>
<p>❌ <strong>ÉCHEC (FAILING):</strong></p>
<pre><code>SMART overall-health self-assessment test result: FAILED</code></pre>
<ul>
<li><strong>CRITIQUE : Sauvegardez les données immédiatement</strong></li>
<li>Remplacez le disque dès que possible</li>
</ul>
<p>⚠️ <strong>Inconnu/Non pris en charge :</strong></p>
<pre><code>Device does not support SMART</code></pre>
<ul>
<li>Disque très ancien ou boîtier USB bloquant SMART</li>
<li>Utilisez d'autres méthodes de diagnostic</li>
</ul>
<h3 id="step-3-detailed-smart-analysis">Étape 3 : Analyse SMART détaillée</h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get full SMART report</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">smartctl</span> <span class="at">-a</span> /dev/sda <span class="op">&gt;</span> /tmp/smart_report_<span class="va">$(</span><span class="fu">date</span> +%Y%m%d<span class="va">)</span>.txt</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View the report</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> /tmp/smart_report_<span class="va">$(</span><span class="fu">date</span> +%Y%m%d<span class="va">)</span>.txt</span></code></pre></div>
<p><strong>Sections clés à vérifier :</strong></p>
<h4 id="a.-device-information">A. Informations sur le périphérique</h4>
<pre><code>Model Family:     Seagate Momentus 5400.4
Device Model:     ST9250827AS
Serial Number:    5RG0J6QZ
User Capacity:    250,059,350,016 bytes [250 GB]
Rotation Rate:    5400 rpm</code></pre>
<ul>
<li>Notez le modèle et l'âge</li>
<li>Les disques durs d'ordinateur portable (Momentus) s'usent plus vite que les disques durs de bureau</li>
<li>5400 RPM est lent (disque d'ordinateur portable)</li>
</ul>
<h4 id="b.-smart-attributes-table">B. Tableau des attributs SMART</h4>
<pre><code>ID# ATTRIBUTE_NAME          VALUE WORST THRESH TYPE      WHEN_FAILED RAW_VALUE
  5 Reallocated_Sector_Ct   087   087   036    Pre-fail  -           534
197 Current_Pending_Sector  099   078   000    Old_age   -           33
198 Offline_Uncorrectable   099   078   000    Old_age   -           33
187 Reported_Uncorrect      001   001   000    Old_age   -           1582</code></pre>
<p><strong>Comment lire :</strong> - <strong>VALUE</strong> : Valeur normalisée actuelle (100 = neuf, 0 = pire) - <strong>WORST</strong> : Valeur la plus basse jamais enregistrée - <strong>THRESH</strong> : Seuil - si VALUE < THRESH, l'attribut a échoué - <strong>RAW_VALUE</strong> : Compte réel (c'est ce qui compte !)</p>
<p><strong>Signaux d'alarme :</strong> - Reallocated_Sector_Ct RAW &gt; 100 - Current_Pending_Sector RAW &gt; 0 - Reported_Uncorrect RAW &gt; 100 - Toute valeur WHEN_FAILED affichant « FAILING_NOW »</p>
<h3 id="step-4-check-system-logs-for-disk-errors">Étape 4 : Vérifier les journaux système pour les erreurs de disque</h3>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check dmesg for disk errors</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dmesg</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-i</span> sda <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-i</span> <span class="st">&quot;error\|fail&quot;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Common error patterns:</span></span></code></pre></div>
<p><strong>Erreurs critiques :</strong></p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DID_BAD_TARGET - Disk not responding</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ex">sd</span> 0:0:0:0: <span class="pp">[</span><span class="ss">sda</span><span class="pp">]</span> FAILED Result: hostbyte=DID_BAD_TARGET</span></code></pre></div>
<p>→ Défaillance du disque/contrôleur, problème de câble, ou disque mort</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Medium Error - Unrecoverable read error</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">sd</span> 0:0:0:0: <span class="pp">[</span><span class="ss">sda</span><span class="pp">]</span> Sense Key : Medium Error</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Add.</span> Sense: Unrecovered read error</span></code></pre></div>
<p>→ Secteurs défectueux, dommage à la surface du disque</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I/O error - Can&#39;t read/write</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="ex">I/O</span> error, dev sda, sector X op 0x0:<span class="er">(</span><span class="ex">READ</span><span class="kw">)</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Buffer</span> I/O error on dev sda</span></code></pre></div>
<p>→ Défaillance du support physique</p>
<h3 id="step-5-run-smart-self-tests">Étape 5 : Exécuter les auto-tests SMART</h3>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Short test (1-2 minutes)</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ex">smartctl</span> <span class="at">-t</span> short /dev/sda</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Wait for completion</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sleep</span> 120</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check results</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="ex">smartctl</span> <span class="at">-l</span> selftest /dev/sda</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Long test (1-2 hours) - more thorough</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="ex">smartctl</span> <span class="at">-t</span> long /dev/sda</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Check status</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="ex">smartctl</span> <span class="at">-a</span> /dev/sda <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-A</span> 10 <span class="st">&quot;Self-test execution status&quot;</span></span></code></pre></div>
<p><strong>Résultats des tests :</strong></p>
<p>✅ <strong>Terminé sans erreur :</strong> - Le disque a réussi tous les tests - Continuez de surveiller régulièrement</p>
<p>⚠️<strong>Terminé : l'élément de lecture du test a échoué :</strong> - Secteurs défectueux trouvés pendant le test - Envisagez le remplacement</p>
<p>❌ <strong>Avorté par l'hôte / interrompu :</strong> - Le test n'a pas pu se terminer - Problèmes de disque graves</p>
<hr />
<h2 id="health-assessment-decision-matrix">Matrice de décision d'évaluation de l'état de santé</h2>
<h3 id="when-to-keep-using-disk">Quand continuer à utiliser le disque</h3>
<p>✅ Toutes les conditions doivent être vraies : - Statut SMART : RÉUSSI - Secteurs réalloués : 0-10 - Secteurs en attente : 0 - Erreurs non corrigeables : 0 - Nombre d'erreurs : &lt; 100 - Aucune erreur dans les journaux système - Auto-tests réussis - Performance normale</p>
<h3 id="when-to-monitor-closely-weekly">Quand surveiller attentivement (hebdomadaire)</h3>
<p>⚠️ L'une des conditions suivantes : - Secteurs réalloués : 11-100 - Secteurs en attente : 1-5 - Erreurs non corrigeables : 1-10 - Nombre d'erreurs : 100-500 - Erreurs d'E/S occasionnelles - Performance dégradée de 10-20%</p>
<h3 id="when-to-replace-immediately">Quand remplacer immédiatement</h3>
<p>❌ L'une des conditions suivantes : - Statut SMART : ÉCHEC - Secteurs réalloués : &gt; 100 - Secteurs en attente : &gt; 5 - Erreurs non corrigeables : &gt; 10 - Nombre d'erreurs : &gt; 500 - Erreurs DID_BAD_TARGET fréquentes - Impossible de monter le système de fichiers - Performance dégradée de &gt; 20% - Bruits de cliquetis/grincements</p>
<hr />
<h2 id="automated-monitoring-script">Script de surveillance automatisé</h2>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as: /usr/local/bin/disk-health-check.sh</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Run daily via cron</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="va">LOG_FILE</span><span class="op">=</span><span class="st">&quot;/var/log/disk-health.log&quot;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="va">ALERT_EMAIL</span><span class="op">=</span><span class="st">&quot;root&quot;</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;=== Disk Health Check - </span><span class="va">$(</span><span class="fu">date</span><span class="va">)</span><span class="st"> ===&quot;</span> <span class="kw">|</span> <span class="fu">tee</span> <span class="at">-a</span> <span class="va">$LOG_FILE</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> DISK <span class="kw">in</span> /dev/sd<span class="pp">?</span> /dev/nvme<span class="pp">?</span>n<span class="pp">?</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">[</span> <span class="ot">-e</span> <span class="st">&quot;</span><span class="va">$DISK</span><span class="st">&quot;</span> <span class="bu">]</span> <span class="kw">||</span> <span class="cf">continue</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;Checking </span><span class="va">$DISK</span><span class="st">...&quot;</span> <span class="kw">|</span> <span class="fu">tee</span> <span class="at">-a</span> <span class="va">$LOG_FILE</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check SMART support</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="ot">! </span><span class="ex">smartctl</span> <span class="at">-i</span> <span class="va">$DISK</span> <span class="op">&amp;&gt;</span>/dev/null<span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;  SMART not supported on </span><span class="va">$DISK</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">tee</span> <span class="at">-a</span> <span class="va">$LOG_FILE</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">fi</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Health check</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    <span class="va">HEALTH</span><span class="op">=</span><span class="va">$(</span><span class="ex">smartctl</span> <span class="at">-H</span> <span class="va">$DISK</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;SMART overall-health&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $NF}&#39;</span><span class="va">)</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;  Health: </span><span class="va">$HEALTH</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">tee</span> <span class="at">-a</span> <span class="va">$LOG_FILE</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check critical attributes</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    <span class="va">REALLOCATED</span><span class="op">=</span><span class="va">$(</span><span class="ex">smartctl</span> <span class="at">-A</span> <span class="va">$DISK</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Reallocated_Sector&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $10}&#39;</span><span class="va">)</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    <span class="va">PENDING</span><span class="op">=</span><span class="va">$(</span><span class="ex">smartctl</span> <span class="at">-A</span> <span class="va">$DISK</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Current_Pending&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $10}&#39;</span><span class="va">)</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>    <span class="va">UNCORRECTABLE</span><span class="op">=</span><span class="va">$(</span><span class="ex">smartctl</span> <span class="at">-A</span> <span class="va">$DISK</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Offline_Uncorrectable&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $10}&#39;</span><span class="va">)</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;  Secteurs réalloués: </span><span class="va">$REALLOCATED</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">tee</span> <span class="at">-a</span> <span class="va">$LOG_FILE</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;  Secteurs en attente: </span><span class="va">$PENDING</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">tee</span> <span class="at">-a</span> <span class="va">$LOG_FILE</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;  Secteurs non corrigeables: </span><span class="va">$UNCORRECTABLE</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">tee</span> <span class="at">-a</span> <span class="va">$LOG_FILE</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Alert conditions</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">[</span> <span class="st">&quot;</span><span class="va">$HEALTH</span><span class="st">&quot;</span> <span class="ot">!=</span> <span class="st">&quot;PASSED&quot;</span> <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;ALERTE : La vérification de l&#39;état de santé du </span><span class="va">$DISK</span><span class="st"> a ÉCHOUÉ !&quot;</span> <span class="kw">|</span> <span class="ex">mail</span> <span class="at">-s</span> <span class="st">&quot;CRITIQUE: Défaillance du disque&quot;</span> <span class="va">$ALERT_EMAIL</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">fi</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">[</span> <span class="st">&quot;</span><span class="va">${REALLOCATED</span><span class="op">:-</span>0<span class="va">}</span><span class="st">&quot;</span> <span class="ot">-gt</span> 100 <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;ALERTE : </span><span class="va">$DISK</span><span class="st"> a </span><span class="va">$REALLOCATED</span><span class="st"> secteurs réalloués !&quot;</span> <span class="kw">|</span> <span class="ex">mail</span> <span class="at">-s</span> <span class="st">&quot;AVERTISSEMENT: Dégradation du disque&quot;</span> <span class="va">$ALERT_EMAIL</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">fi</span></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">[</span> <span class="st">&quot;</span><span class="va">${PENDING</span><span class="op">:-</span>0<span class="va">}</span><span class="st">&quot;</span> <span class="ot">-gt</span> 0 <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;ALERTE : </span><span class="va">$DISK</span><span class="st"> a </span><span class="va">$PENDING</span><span class="st"> secteurs en attente !&quot;</span> <span class="kw">|</span> <span class="ex">mail</span> <span class="at">-s</span> <span class="st">&quot;AVERTISSEMENT: Erreurs disque&quot;</span> <span class="va">$ALERT_EMAIL</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">fi</span></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span> <span class="kw">|</span> <span class="fu">tee</span> <span class="at">-a</span> <span class="va">$LOG_FILE</span></span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;===================================&quot;</span> <span class="kw">|</span> <span class="fu">tee</span> <span class="at">-a</span> <span class="va">$LOG_FILE</span></span></code></pre></div>
<p><strong>Installation :</strong></p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make executable</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> +x /usr/local/bin/disk-health-check.sh</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Add to daily cron</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;0 8 * * * /usr/local/bin/disk-health-check.sh&quot;</span> <span class="kw">|</span> <span class="fu">crontab</span> <span class="at">-</span></span></code></pre></div>
<hr />
<h2 id="monitoring-schedule">Calendrier de surveillance</h2>
<h3 id="daily-automated">Quotidien (Automatisé)</h3>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add to cron: /etc/cron.daily/disk-check</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> disk <span class="kw">in</span> /dev/sd<span class="pp">?</span> /dev/nvme<span class="pp">?</span>n<span class="pp">?</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">[</span> <span class="ot">-e</span> <span class="st">&quot;</span><span class="va">$disk</span><span class="st">&quot;</span> <span class="bu">]</span> <span class="kw">||</span> <span class="cf">continue</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">smartctl</span> <span class="at">-H</span> <span class="va">$disk</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-q</span> PASSED <span class="kw">||</span> <span class="dt">\</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;ATTENTION : la vérification de l&#39;état de santé de </span><span class="va">$disk</span><span class="st"> a échoué !&quot;</span> <span class="kw">|</span> <span class="ex">mail</span> <span class="at">-s</span> <span class="st">&quot;Alerte Disque&quot;</span> root</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre></div>
<h3 id="weekly-manual">Hebdomadaire (Manuel)</h3>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check SMART status</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="ex">smartctl</span> <span class="at">-a</span> /dev/sda <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="st">&quot;Reallocated|Pending|Uncorrect|Error&quot;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check system logs</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dmesg</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-i</span> <span class="st">&quot;sda.*error&quot;</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-20</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check performance</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="ex">iostat</span> <span class="at">-x</span> 1 5</span></code></pre></div>
<h3 id="monthly-detailed">Mensuel (Détaillé)</h3>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run short self-test</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">smartctl</span> <span class="at">-t</span> short /dev/sda</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sleep</span> 120</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="ex">smartctl</span> <span class="at">-l</span> selftest /dev/sda</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Full SMART report</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="ex">smartctl</span> <span class="at">-a</span> /dev/sda <span class="op">&gt;</span> /var/log/smart_<span class="va">$(</span><span class="fu">date</span> +%Y%m%d<span class="va">)</span>.log</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare to previous month</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="fu">diff</span> /var/log/smart_<span class="va">$(</span><span class="fu">date</span> <span class="at">-d</span> <span class="st">&quot;1 month ago&quot;</span> +%Y%m%d<span class="va">)</span>.log <span class="dt">\</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>     /var/log/smart_<span class="va">$(</span><span class="fu">date</span> +%Y%m%d<span class="va">)</span>.log</span></code></pre></div>
<hr />
<h2 id="disk-lifespan-expectations">Durée de vie attendue des disques</h2>
<table>
<thead>
<tr>
<th>Type</th>
<th>Durée de vie moyenne</th>
<th>Facteurs</th>
</tr>
</thead>
<tbody>
<tr>
<td>HDD grand public</td>
<td>3-5 ans</td>
<td>Usage, température, qualité</td>
</tr>
<tr>
<td>HDD d'entreprise</td>
<td>5-7 ans</td>
<td>Conçu pour une utilisation 24/7</td>
</tr>
<tr>
<td>SSD grand public</td>
<td>5-10 ans</td>
<td>Cycles d'écriture, TBW</td>
</tr>
<tr>
<td>SSD d'entreprise</td>
<td>5-10+ ans</td>
<td>Endurance supérieure</td>
</tr>
</tbody>
</table>
<p><strong>Signes avant-coureurs de l'âge :</strong> - 5+ ans → Surveillez attentivement - 7+ ans → Planifiez le remplacement - 10+ ans → Remplacez de manière proactive</p>
<hr />
<h2 id="key-takeaways">Points clés à retenir</h2>
<ol type="1">
<li><strong>Surveillez régulièrement</strong> - Les données SMART prédisent 70 % des défaillances</li>
<li><strong>Agissez sur les avertissements</strong> - N'attendez pas la panne complète</li>
<li><strong>Les sauvegardes sont essentielles</strong> - Le RAID n'est pas une sauvegarde</li>
<li><strong>Remplacez de manière proactive</strong> - Les disques anciens finiront par tomber en panne</li>
<li><strong>Testez vos sauvegardes</strong> - Vérifiez que vous pouvez restaurer</li>
<li><strong>Documentez tout</strong> - Conservez des journaux de maintenance</li>
</ol>
<hr />
<p><strong>Dernière mise à jour :</strong> 2025-10-30<br />
<strong>Statut :</strong> Remplacement de disque en attente<br />
<strong>Priorité :</strong> ÉLEVÉE - Aucun stockage de sauvegarde actif</p>
                </div>

                <div class="article-navigation">
                </div>
            </div>
        </section>
    </main>

    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>OLYAHYAI</h3>
                    <p>Pentester en formation | Passionné de cybersécurité</p>
                </div>

                <div class="footer-links">
                    <h4>Liens rapides</h4>
                    <ul>
                        <li><a href="/index.html#home">Accueil</a></li>
                        <li><a href="/index.html#about">À propos</a></li>
                        <li><a href="/index.html#projects">Projets</a></li>
                        <li><a href="/blog/index.html">Blog</a></li>
                    </ul>
                </div>

                <div class="footer-social">
                    <h4>Contactez-moi</h4>
                    <div class="social-links">
                        <a href="https://github.com/OLYAHYAI" target="_blank" rel="noopener">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="https://ma.linkedin.com/in/lyahyai-omar" target="_blank" rel="noopener">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="mailto:contact@olyahyai.com">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 OLYAHYAI. Tous droits réservés.</p>
                <p>Construit avec <i class="fas fa-heart"></i> et <i class="fas fa-terminal"></i></p>
            </div>
        </div>
    </footer>

    <button class="back-to-top" aria-label="Back to top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <script src="../../js/main.js"></script>
    <script src="../../js/animations.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>