<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tester des LLM locaux sur du matériel limité et déboguer les échecs persistants de démarrage d'une VM Kali Linux sous Proxmox. Dépannage homelab essentiel et expérimentation IA...">
    <meta name="keywords" content="filesystem, hardware">
    <meta name="author" content="OLYAHYAI">

    <title>Aventures Ai Kali : Tests LLM et Débogage Proxmox | Blog Technique d'Omar LYAHYAI</title>

    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/responsive.css">
    <link rel="stylesheet" href="/css/animations.css">
    <link rel="stylesheet" href="/css/blog.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body class="dark-theme">
    <a href="#main-content" class="skip-link">Passer au contenu principal</a>

    <header class="header" role="banner">
        <nav class="navbar" role="navigation" aria-label="Navigation principale">
            <div class="container">
                <div class="nav-brand">
                    <a href="/index.html" class="logo">
                        <i class="fas fa-terminal"></i>
                        <span>OLYAHYAI</span>
                    </a>
                </div>

                <button class="nav-toggle" aria-label="Basculer la navigation" aria-expanded="false">
                    <span class="hamburger"></span>
                </button>

                <ul class="nav-menu">
                    <li><a href="/index.html#home" class="nav-link">Accueil</a></li>
                    <li><a href="/index.html#about" class="nav-link">À propos</a></li>
                    <li><a href="/index.html#projects" class="nav-link">Projets</a></li>
                    <li><a href="/index.html#skills" class="nav-link">Compétences</a></li>
                    <li><a href="/blog/index.html" class="nav-link active">Blog</a></li>
                    <li><a href="/index.html#contact" class="nav-link">Contact</a></li>
                </ul>

                <div class="nav-actions">
                    <a href="/en/automation_ai/ai-kali-adventures-llm-testing-proxmox-debugging.html" class="lang-toggle" aria-label="Change language">
                        <span class="lang-current">EN</span>
                        <i class="fas fa-globe"></i>
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <main id="main-content">
        <section class="article-header" role="region" aria-label="Article header">
            <div class="container">
                <div class="article-breadcrumb">
                    <nav class="breadcrumb" aria-label="Breadcrumb">
                        <a href="/index.html">Accueil</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <a href="/blog/index.html">Blog</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <a href="/blog/automation_ai.html">Automatisation & IA</a>
                        <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
                        <span>Aventures Ai Kali : Tests LLM et Débogage Proxmox</span>
                    </nav>
                </div>

                <h1 class="article-title">Aventures Ai Kali : Tests LLM et Débogage Proxmox</h1>

                <div class="article-meta">
                    <div class="article-meta-item">
                        <i class="far fa-calendar"></i>
                        <span>2025-11-19</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="far fa-clock"></i>
                        <span>5 min de lecture</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="fas fa-folder"></i>
                        <span>Automatisation & IA</span>
                    </div>
                    <div class="article-meta-item">
                        <i class="fas fa-tags"></i>
                        <span>filesystem, hardware</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="article-content" role="region" aria-label="Article content">
            <div class="container">
                <div class="article-body">
                    <!-- 
TEMPLATE - Press Alt+E to apply

UPDATE THESE FIELDS:
- title: "Your Title" (KEEP QUOTES)
- date: "YYYY-MM-DD" (KEEP QUOTES)
- category: infrastructure/network_security/automation_ai/reference
- language: auto (let workflow detect) | en (force English) | fr (force French)
- tags: single-keyword-only (NO COMMAS! Use one word or hyphenated)
- description: "Short summary" (KEEP QUOTES)

CRITICAL RULES:
✅ DO: Keep quotes around title, date, description
✅ DO: Use "auto" for language to let workflow detect from content
✅ DO: Use single word for tags (homelab, pfsense, proxmox)
❌ DON'T: Use commas in tags (breaks YAML!)
❌ DON'T: Remove quotes from title/date/description

The workflow will:
- Detect language automatically from your content
- Generate English + French versions
- Create full HTML with navigation
- Preserve images and links
-->
<!-- 
TEMPLATE - Press Alt+E to apply

UPDATE THESE FIELDS:
- title: "Your Title" (KEEP QUOTES)
- date: "YYYY-MM-DD" (KEEP QUOTES)
- category: infrastructure/network_security/automation_ai/reference
- language: auto (let workflow detect) | en (force English) | fr (force French)
- tags: single-keyword-only (NO COMMAS! Use one word or hyphenated)
- description: "Short summary" (KEEP QUOTES)

CRITICAL RULES:
✅ DO: Keep quotes around title, date, description
✅ DO: Use "auto" for language to let workflow detect from content
✅ DO: Use single word for tags (homelab, pfsense, proxmox)
❌ DON'T: Use commas in tags (breaks YAML!)
❌ DON'T: Remove quotes from title/date/description

The workflow will:
- Detect language automatically from your content
- Generate English + French versions
- Create full HTML with navigation
- Preserve images and links
-->
<h1 id="my-ai-and-kali-adventures-llm-testing-and-proxmox-debugging">Mes
Aventures AI et Kali : Tests LLM et Débogage Proxmox</h1>
<h2 id="session-overview">Aperçu de la Session</h2>
<p>Cette session a combiné deux défis homelab fascinants : tester le
déploiement local d'un LLM (Large Language Model) sur du matériel limité,
et déboguer une VM Kali Linux récalcitrante qui refusait de démarrer sur
Proxmox. Ces deux problèmes ont apporté de précieuses leçons sur la
gestion des ressources et le dépannage de la virtualisation.</p>
<h2 id="part-1-local-llm-testing-on-consumer-hardware">Partie 1 : Test de
LLM local sur Matériel Grand Public</h2>
<h3 id="the-goal">L'Objectif</h3>
<p>Exécuter des LLM open source localement sur un ThinkPad E14 Gen 2
pour: - Assistance IA préservant la confidentialité - Accès hors ligne
aux capacités de l'IA - Apprentissage sur la quantification et
l'optimisation des LLM - Complétion de code et support au développement</p>
<h3 id="hardware-constraints">Contraintes Matérielles</h3>
<p><strong>ThinkPad E14 Gen 2 Spécifications:</strong> -
<strong>CPU</strong>: Intel i5-1135G7 (4 cores, 8 threads) -
<strong>RAM</strong>: 16 GB DDR4 - <strong>Storage</strong>: 256 GB SSD
- <strong>GPU</strong>: Intel Iris Xe (integrated, Vulkan support) -
<strong>Limitations</strong>: Pas de GPU dédié, RAM limitée</p>
<h3 id="llm-model-evaluation">Évaluation du Modèle LLM</h3>
<h4 id="attempt-1-gpt-oss-20b">Tentative 1 : GPT-OSS-20B</h4>
<p><strong>Spécifications du Modèle:</strong> - <strong>Size</strong>: 21
billion parameters - <strong>Quantization</strong>: 4-bit (Q4) -
<strong>File Size</strong>: ~12 GB - <strong>License</strong>: Apache
2.0 (utilisation commerciale autorisée)</p>
<p><strong>Évaluation de la Compatibilité:</strong></p>
<pre><code>Exigences du Modèle :
├── VRAM: ~8 GB (GPU)
├── System RAM: ~16 GB minimum
├── Storage: 12 GB for model
└── Performance: Dedicated GPU recommended

Ressources Disponibles :
├── VRAM: ~2 GB (shared with system)
├── System RAM: 16 GB (but OS needs ~4 GB)
├── Storage: 256 GB (adequate)
└── GPU: Integrated Iris Xe</code></pre>
<p><strong>Résultat</strong>: ❌ <strong>Incompatible</strong></p>
<p><strong>Raisons:</strong> 1. <strong>RAM Insuffisante</strong>: Le
modèle consommerait environ 12 Go, ne laissant que 4 Go pour l'OS 2.
<strong>Pas de GPU Dédié</strong>: L'Iris Xe ne peut pas gérer
efficacement un modèle à 20 milliards de paramètres 3.
<strong>Performance</strong>: Subirait des ralentissements extrêmes
(plus de 10 secondes par jeton) 4. <strong>Risque de Plantage du
Système</strong>: Erreurs de mémoire insuffisante probables</p>
<h4 id="attempt-2-mistral-7b-q4">Tentative 2 : Mistral 7B (Q4)</h4>
<p><strong>Options de Modèle Découvertes:</strong> 1.
<strong>mistral-7b-ielts-evaluator-q4</strong> (specialized for IELTS
evaluation) 2. <strong>Mistral-7B-Instruct-v0.1-Q4_K_M</strong> (usage
général) ✓ <strong>Recommandé</strong></p>
<p><strong>Spécifications du Modèle:</strong> - <strong>Size</strong>: 7
billion parameters - <strong>Quantization</strong>: Q4_K_M (4-bit with
mixed precision) - <strong>File Size</strong>: ~4.3 GB -
<strong>Performance</strong>: Optimisé pour l'inférence CPU</p>
<p><strong>Évaluation de la Compatibilité:</strong></p>
<pre><code>Exigences du Modèle :
├── RAM: ~6 GB (model + overhead)
├── Storage: 4.3 GB
├── CPU: Multi-core (4+ cores recommended)
└── Acceleration: AVX2, Vulkan optional

Ressources Disponibles :
├── RAM: 16 GB ✓
├── Storage: 256 GB ✓
├── CPU: i5-1135G7 (4 cores) ✓
└── Acceleration: AVX2 ✓, Vulkan ✓</code></pre>
<p><strong>Résultat</strong>: ✅ <strong>Compatible</strong></p>
<p><strong>Performance Attendue:</strong> - Jetons par seconde: 2-5
(CPU) - Temps de réponse: 10-30 secondes pour une requête typique -
Utilisation de la mémoire: ~6 GB pendant l'inférence</p>
<h3 id="llm-deployment-with-lm-studio">Déploiement du LLM avec LM
Studio</h3>
<h4 id="installation">Installation</h4>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Télécharger LM Studio</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> https://lmstudio.ai/download/linux/latest <span class="at">-O</span> lmstudio.AppImage</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Rendre exécutable</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> +x lmstudio.AppImage</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Exécuter</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./lmstudio.AppImage</span></span></code></pre></div>
<h4 id="configuration-for-low-resource-systems">Configuration pour les
Systèmes à Faibles Ressources</h4>
<p><strong>Paramètres → Inférence:</strong> - <strong>Longueur du
Contexte</strong>: 2048 (réduire à partir de 4096 pour une inférence
plus rapide) - <strong>Déchargement GPU</strong>: 0 layers (CPU-only on
integrated GPU) - <strong>Threads</strong>: 6 (laisser 2 cores pour le
système) - <strong>Taille du Lot</strong>: 8 (plus bas = plus lent mais
plus stable) - <strong>Utiliser mlock</strong>: ✓ (garder le modèle en
RAM, empêcher le swap)</p>
<p><strong>Paramètres → Modèle:</strong> - <strong>Temperature</strong>:
0.7 - <strong>Top P</strong>: 0.9 - <strong>Repeat Penalty</strong>:
1.1</p>
<h3 id="alternative-llm-options-for-constrained-hardware">Options LLM
Alternatives pour le Matériel Contraint</h3>
<h4 id="tinyllama-1.1b-ultra-lightweight">TinyLlama 1.1B
(Ultra-Léger)</h4>
<p><strong>Spécifications:</strong> - Size: 1.1 billion parameters -
File Size: ~700 MB (Q4) - RAM Usage: ~2 GB - Performance: 10-20
tokens/sec on CPU</p>
<p><strong>Cas d'Utilisation:</strong> - Complétion de code - Chat
simple - Prototypage rapide</p>
<p><strong>Installation:</strong></p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dans LM Studio, rechercher :</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">TinyLlama-1.1B-Chat-v1.0-Q4_K_M</span></span></code></pre></div>
<h4 id="phi-2-2.7b---microsoft">Phi-2 (2.7B) - Microsoft</h4>
<p><strong>Spécifications:</strong> - Size: 2.7 billion parameters -
File Size: ~1.6 GB (Q4) - RAM Usage: ~3 GB - Performance: 5-10
tokens/sec</p>
<p><strong>Avantages:</strong> - Entraîné sur des données de code et de
raisonnement de haute qualité - Excellent pour les tâches de
programmation - Architecture efficace</p>
<p><strong>Installation:</strong></p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dans LM Studio :</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">microsoft/phi-2-Q4_K_M</span></span></code></pre></div>
<h3 id="performance-optimization-techniques">Techniques d'Optimisation
des Performances</h3>
<h4 id="use-quantization">1. Utiliser la Quantification</h4>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Niveaux de quantification (du plus au moins compressé) :</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Q2_K</span>   <span class="co"># 2-bit : Le plus rapide, qualité la plus basse</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Q4_K_M</span> <span class="co"># 4-bit : Équilibré (recommandé)</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Q5_K_M</span> <span class="co"># 5-bit : Meilleure qualité, plus lent</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Q8_0</span>   <span class="co"># 8-bit : Meilleure qualité, le plus lent</span></span></code></pre></div>
<h4 id="optimize-cpu-inference">2. Optimiser l'Inférence CPU</h4>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Activer l'accélération AVX2</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">OMP_NUM_THREADS</span><span class="op">=</span>6</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Utiliser llama.cpp avec des optimisations</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="ex">./main</span> <span class="at">-m</span> model.gguf <span class="dt">\</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">-t</span> 6 <span class="dt">\</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">--mlock</span> <span class="dt">\</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">-ngl</span> 0 <span class="dt">\</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">--ctx-size</span> 2048</span></code></pre></div>
<h4 id="monitor-resource-usage">3. Surveiller l'Utilisation des
Ressources</h4>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Installer les outils de surveillance</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install htop nvtop</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Surveiller pendant l'inférence</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="ex">htop</span>  <span class="co"># CPU et RAM</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="ex">watch</span> <span class="at">-n</span> 1 free <span class="at">-h</span>  <span class="co"># Utilisation de la mémoire</span></span></code></pre></div>
<h2 id="part-2-proxmox-vm-debugging---kali-linux-boot-failure">Partie 2
: Débogage de VM Proxmox - Échec de Démarrage de Kali Linux</h2>
<h3 id="the-error">L'Erreur</h3>
<pre><code>Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</code></pre>
<h3 id="problem-analysis">Analyse du Problème</h3>
<p>Cette erreur cryptique indique que le noyau ne peut pas trouver ou
monter le système de fichiers racine. Causes courantes dans les
environnements virtualisés :</p>
<ol type="1">
<li><strong>Mauvaise Configuration GRUB</strong>: Paramètre
<code>root=</code> incorrect</li>
<li><strong>Partition EFI Manquante</strong>: Démarrage UEFI sans
disque EFI</li>
<li><strong>Contrôleur de Disque Incompatible</strong>: Type de
contrôleur SCSI incorrect</li>
<li><strong>Initramfs Corrompu</strong>: Pilotes manquants dans le
ramdisk initial</li>
</ol>
<h3 id="debugging-process">Processus de Débogage</h3>
<h4 id="step-1-verify-bios-type">Étape 1 : Vérifier le Type de BIOS</h4>
<p><strong>Configuration Initiale:</strong> - BIOS: SeaBIOS (BIOS hérité)
- Machine Type: i440fx - Disk: SCSI avec iothread activé</p>
<p><strong>Avertissement Rencontré:</strong></p>
<pre><code>WARN: iothread is only valid with virtio disk or virtio-scsi-single controller, ignoring</code></pre>
<p><strong>Problème</strong>: Le type de contrôleur SCSI ne prend pas en
charge iothread, mais l'avertissement a été ignoré lors de la création
de la VM.</p>
<h4 id="step-2-try-ovmf-uefi-boot">Étape 2 : Essayer le Démarrage OVMF
(UEFI)</h4>
<p><strong>Modifications Effectuées:</strong> 1. BIOS: SeaBIOS →
<strong>OVMF (UEFI)</strong> 2. Ajout du <strong>Disque EFI</strong> via
Hardware → Add → EFI Disk 3. Type de Machine: i440fx →
<strong>q35</strong> (chipset moderne)</p>
<p><strong>Résultat</strong>: ❌ <strong>Échec du démarrage</strong></p>
<p><strong>Analyse</strong>: OVMF nécessite une disposition de partition
spécifique et un chargeur de démarrage EFI installés pendant
l'installation de l'OS. Changer le type de BIOS après l'installation ne
fonctionne pas.</p>
<h4 id="step-3-fix-scsi-controller">Étape 3 : Corriger le Contrôleur
SCSI</h4>
<p><strong>Cause Profonde Identifiée:</strong></p>
<p>L'avertissement concernant iothread était critique : - iothread
nécessite le contrôleur <strong>VirtIO SCSI Single</strong> - La VM
utilisait un contrôleur <strong>SCSI</strong> standard - Le noyau ne
pouvait pas communiquer correctement avec le disque</p>
<p><strong>Résolution:</strong></p>
<ol type="1">
<li><p>Éteindre la VM</p></li>
<li><p>Supprimer le disque existant</p></li>
<li><p>Ajouter un disque avec la configuration correcte :</p>
<ul>
<li>Bus/Périphérique: <strong>SCSI</strong></li>
<li>Storage: local-lvm</li>
<li>Contrôleur SCSI: <strong>VirtIO SCSI Single</strong></li>
<li>iothread: ✓</li>
</ul></li>
<li><p>Mettre à Jour la Configuration de la VM :</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modifier la config de la VM</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> /etc/pve/qemu-server/101.conf</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># S'assurer que le contrôleur est correctement défini :</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="ex">scsihw:</span> virtio-scsi-single</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Vérifier que le disque utilise le bon contrôleur :</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="ex">scsi0:</span> local-lvm:vm-101-disk-0,iothread=1</span></code></pre></div></li>
<li><p>Redémarrer la VM</p></li>
</ol>
<p><strong>Résultat</strong>: ✅ <strong>Démarrage Réussi !</strong></p>
<h3 id="final-working-configuration">Configuration Finale
Fonctionnelle</h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># /etc/pve/qemu-server/101.conf</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="ex">agent:</span> 1</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="ex">bios:</span> seabios</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="ex">boot:</span> order=scsi0<span class="kw">;</span><span class="ex">ide2</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="ex">cores:</span> 4</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="ex">cpu:</span> host</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="ex">ide2:</span> local:iso/kali-linux-2024.4-installer-amd64.iso,media=cdrom</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="ex">machine:</span> i440fx</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="ex">memory:</span> 8192</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="ex">name:</span> kali-pentest</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="ex">net0:</span> virtio=XX:XX:XX:XX:XX:XX,bridge=vmbr1,firewall=0</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="ex">numa:</span> 0</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="ex">ostype:</span> l26</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="ex">scsi0:</span> local-lvm:vm-101-disk-0,iothread=1,size=80G</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="ex">scsihw:</span> virtio-scsi-single</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="ex">smbios1:</span> uuid=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="ex">sockets:</span> 1</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="ex">vmgenid:</span> XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</span></code></pre></div>
<h3 id="key-lessons-from-debugging">Leçons Clés du Débogage</h3>
<ol type="1">
<li><strong>Lire Attentivement les Avertissements</strong>:
L'avertissement iothread était l'indice critique</li>
<li><strong>Le Type de BIOS Compte</strong>: Impossible de basculer
entre SeaBIOS et OVMF après l'installation</li>
<li><strong>Compatibilité du Contrôleur</strong>: VirtIO SCSI Single
requis pour les fonctionnalités avancées</li>
<li><strong>Type de Machine</strong>: q35 pour le matériel moderne,
i440fx pour la compatibilité</li>
</ol>
<h2 id="recommendations-for-similar-setups">Recommandations pour des
Configurations Similaires</h2>
<h3 id="for-llm-testing-on-limited-hardware">Pour les Tests LLM sur
Matériel Limité:</h3>
<p><strong>Modèles Recommandés (par cas d'utilisation):</strong></p>
<pre><code>Tâches Légères (2-4 Go de RAM disponibles) :
├── TinyLlama 1.1B (~700 Mo, rapide)
└── Phi-2 2.7B (~1.6 Go, bon pour le code)

Tâches Moyennes (6-8 Go de RAM disponibles) :
├── Mistral 7B Q4 (~4.3 Go, équilibré)
├── Llama 2 7B Q4 (~3.8 Go, usage général)
└── CodeLlama 7B Q4 (~4.3 Go, axé sur le codage)

Tâches Lourdes (12+ Go de RAM disponibles) :
└── Mettre à niveau le matériel ou utiliser des services cloud</code></pre>
<p><strong>Liste de Contrôle d'Optimisation:</strong> - [ ] Utiliser la
quantification Q4 pour un meilleur équilibre taille/qualité - [ ] Activer
l'accélération CPU AVX2 - [ ] Définir la longueur du contexte à 2048
pour une inférence plus rapide - [ ] Utiliser 75 % des threads CPU
disponibles - [ ] Surveiller l'utilisation de la RAM avec
<code>htop</code> - [ ] Envisager un SSD externe si le stockage est
limité</p>
<h3 id="for-proxmox-vm-configuration">Pour la Configuration de VM
Proxmox:</h3>
<p><strong>Bonnes Pratiques:</strong></p>
<pre><code>SeaBIOS (Démarrage Hérité) :
├── Machine: i440fx
├── SCSI Controller: VirtIO SCSI Single
├── Disk: SCSI avec iothread=1
└── Utiliser pour : Linux, OS plus anciens

OVMF (Démarrage UEFI) :
├── Machine: q35
├── Ajouter un Disque EFI pendant la création de la VM
├── SCSI Controller: VirtIO SCSI Single
└── Utiliser pour : OS modernes, Windows, démarrage sécurisé</code></pre>
<p><strong>Flux de Travail de Dépannage:</strong></p>
<ol type="1">
<li><strong>Vérifier les Avertissements Proxmox</strong>: Ne pas ignorer
le texte jaune dans les journaux</li>
<li><strong>Vérifier la Compatibilité du Contrôleur</strong>: Faire
correspondre le contrôleur aux fonctionnalités</li>
<li><strong>Tester l'Ordre de Démarrage</strong>: S'assurer que le
disque est le premier dans la séquence de démarrage</li>
<li><strong>Vérifier la Configuration GRUB</strong>: Vérifier le
paramètre root= dans la console de la VM</li>
<li><strong>Utiliser les Snapshots</strong>: Avant d'apporter des
modifications majeures à la configuration</li>
</ol>
<h2 id="tools-and-resources">Outils et Ressources</h2>
<h3 id="llm-tools">Outils LLM:</h3>
<ul>
<li><strong>LM Studio</strong>: Interface graphique conviviale pour la
gestion des modèles</li>
<li><strong>llama.cpp</strong>: Moteur d'inférence en ligne de
commande</li>
<li><strong>Ollama</strong>: Déploiement LLM basé sur Docker</li>
<li><strong>Jan AI</strong>: Alternative légère à LM Studio</li>
</ul>
<h3 id="proxmox-debugging">Débogage Proxmox:</h3>
<ul>
<li><strong>Journaux Système</strong>: <code>/var/log/pve/tasks/</code></li>
<li><strong>Journaux de VM</strong>: <code>/var/log/qemu-server/</code></li>
<li><strong>Configuration</strong>:
<code>/etc/pve/qemu-server/</code></li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>Cette session a démontré deux compétences homelab critiques :</p>
<ol type="1">
<li><strong>Évaluation des Ressources</strong>: Comprendre les
limitations matérielles et choisir des solutions appropriées (modèles 7B
vs modèles 20B)</li>
<li><strong>Débogage Systématique</strong>: Suivre les messages
d'erreur et les avertissements pour identifier les causes profondes
(iothread + compatibilité du contrôleur)</li>
</ol>
<p>Les deux défis ont renforcé l'importance de : - Lire la
documentation en détail - Surveiller les contraintes de ressources -
Tester progressivement - Documenter les configurations</p>
<p>La VM Kali fonctionnelle et la configuration LLM opérationnelle
offrent une base solide pour de futures recherches en sécurité et des
travaux de développement assistés par l'IA.</p>
<p><em>Prochaines étapes : Intégrer Mistral 7B aux workflows de codage
et déployer des VM vulnérables pour la pratique du pentesting Kali.</em></p>
                </div>

                <div class="article-navigation">
                </div>
            </div>
        </section>
    </main>

    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>OLYAHYAI</h3>
                    <p>Pentester en Formation | Passionné de Cybersécurité</p>
                </div>

                <div class="footer-links">
                    <h4>Liens Rapides</h4>
                    <ul>
                        <li><a href="/index.html#home">Accueil</a></li>
                        <li><a href="/index.html#about">À propos</a></li>
                        <li><a href="/index.html#projects">Projets</a></li>
                        <li><a href="/blog/index.html">Blog</a></li>
                    </ul>
                </div>

                <div class="footer-social">
                    <h4>Se Connecter</h4>
                    <div class="social-links">
                        <a href="https://github.com/OLYAHYAI" target="_blank" rel="noopener">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="https://ma.linkedin.com/in/lyahyai-omar" target="_blank" rel="noopener">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="mailto:contact@olyahyai.com">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 OLYAHYAI. Tous droits réservés.</p>
                <p>Construit avec <i class="fas fa-heart"></i> et <i class="fas fa-terminal"></i></p>
            </div>
        </div>
    </footer>

    <button class="back-to-top" aria-label="Retour en haut">
        <i class="fas fa-chevron-up"></i>
    </button>

    <script src="../../js/main.js"></script>
    <script src="../../js/animations.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>
---